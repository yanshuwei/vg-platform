!function(B){"use strict";var E="ht",y=B[E],Q=Math,e=Q.max,T=Q.min,X=Q.abs,K=Q.atan2,q=(Q.cos,Q.sin,Q.ceil),z=y.Default,I=z.getInternal(),G=y.List,i=I.Mat,S=I.getNodeRect,f=I.intersectionLineRect,t=z.getDistance,D=z.setEdgeType,b="left",P="right",w="top",N="bottom",u="edge.type",C="edge.gap",W="edge.center",c="edge.extend",m=function(t,J){return S(t,J).width},Y=function(U,Y){return S(U,Y).height},M=function(s,q){return I.getEdgeAgentPosition(s,q._40I,q.s("edge.source.position"),q.s("edge.source.offset.x"),q.s("edge.source.offset.y"),q.s("edge.source.anchor.x"),q.s("edge.source.anchor.y"))},V=function(e,c){return I.getEdgeAgentPosition(e,c._41I,c.s("edge.target.position"),c.s("edge.target.offset.x"),c.s("edge.target.offset.y"),c.s("edge.target.anchor.x"),c.s("edge.target.anchor.y"))},j=function(E,Q){var j=E.s(u),J=E.getEdgeGroup();if(J){var U=0;if(J.eachSiblingEdge(function(h){Q.isVisible(h)&&h.s(u)==j&&U++}),U>1)return E.s(C)*(U-1)/2}return 0},_=function(T,Y){var o=T.s(u),x=T.isLooped();if(!T.getEdgeGroup())return x?T.s(C):0;var E,Q=0,a=0,v=0;return T.getEdgeGroup().getSiblings().each(function(D){D.each(function(m){if(m._40I===T._40I&&m.s(u)==o&&Y.isVisible(m)){var t=m.s(C);E?(a+=v/2+t/2,v=t):(E=m,v=t),m===T&&(Q=a)}})}),x?a-Q+v:Q-a/2},r=function(l,R){var D=R.s("edge.corner.radius");return z.toRoundedCorner(l,D)};I.addMethod(y.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),D("boundary",function(H,z,u,A){A||(z=-z);var N,U=M(u,H),v=V(u,H),J=S(u,H._40I),d=S(u,H._41I),L=new i(K(v.y-U.y,v.x-U.x)),D=t(U,v),y=U.x,R=U.y;return N=L.tf(0,z),U={x:N.x+y,y:N.y+R},N=L.tf(D,z),v={x:N.x+y,y:N.y+R},N=f(U,v,J),N&&(U={x:N[0],y:N[1]}),N=f(U,v,d),N&&(v={x:N[0],y:N[1]}),{points:new G([U,v])}}),D("ripple",function(w,Q,z,x){x||(Q=-Q);var D=M(z,w),R=V(z,w),g=t(D,R),C=T(w.s("edge.offset"),g/2),Y=w.s("edge.ripple.size"),J=w.s("edge.ripple.length"),I=w.s("edge.ripple.both"),X=w.s(W),s=w.s("edge.ripple.elevation"),l=new G,F=w.s("edge.ripple.straight")?null:new G,m=new i(K(R.y-D.y,R.x-D.x));x||(s=-s),g-=2*C,J>0&&(Y=q(g/J));var f=g/Y;F&&F.add(1);for(var k=0;Y>k;k++)F&&F.add(3),0===k?l.add({x:C+f*k,y:X?0:Q}):l.add({x:C+f*k,y:Q}),l.add({x:C+f*k+f/2,y:s+Q}),I&&(s=-s);for(l.add({x:C+g,y:X?0:Q}),k=0;k<l.size();k++){var c=m.tf(l.get(k));c.x+=D.x,c.y+=D.y,l.set(k,c)}return{points:l,segments:F}}),D("h.v",function(E,D,C){D=_(E,C);var N=new G,R=E.s(W),w=M(C,E),d=w.x,$=w.y,B=V(C,E),I=B.x,h=B.y,z=0,x=0,U=I-d,A=h-$;return R||(z=m(C,E._40I)/2,x=Y(C,E._41I)/2),U>=0&&0>=A?(N.add({x:d+z,y:$+D}),N.add({x:I+D,y:$+D}),N.add({x:I+D,y:h+x})):0>=U&&A>=0?(N.add({x:d-z,y:$+D}),N.add({x:I+D,y:$+D}),N.add({x:I+D,y:h-x})):U>=0&&A>=0?(N.add({x:d+z,y:$+D}),N.add({x:I-D,y:$+D}),N.add({x:I-D,y:h-x})):(N.add({x:d-z,y:$+D}),N.add({x:I-D,y:$+D}),N.add({x:I-D,y:h+x})),r(N,E)}),D("v.h",function(s,j,Q){j=_(s,Q);var U=new G,z=s.s(W),w=M(Q,s),a=w.x,T=w.y,p=V(Q,s),$=p.x,i=p.y,v=0,q=0,e=$-a,h=i-T;return z||(v=m(Q,s._41I)/2,q=Y(Q,s._40I)/2),e>=0&&0>=h?(U.add({x:a+j,y:T-q}),U.add({x:a+j,y:i+j}),U.add({x:$-v,y:i+j})):0>=e&&h>=0?(U.add({x:a+j,y:T+q}),U.add({x:a+j,y:i+j}),U.add({x:$+v,y:i+j})):e>=0&&h>=0?(U.add({x:a-j,y:T+q}),U.add({x:a-j,y:i+j}),U.add({x:$-v,y:i+j})):(U.add({x:a-j,y:T-q}),U.add({x:a-j,y:i+j}),U.add({x:$+v,y:i+j})),r(U,s)}),D("ortho",function(Q,i,t){var L=new G,N=Q.s(W),l=Q.s("edge.ortho"),J=Q._40I,v=Q._41I,F=M(t,Q),I=F.x,u=F.y,s=V(t,Q),E=s.x,H=s.y,g=E-I,C=H-u,e=N?0:m(t,J)/2,n=N?0:Y(t,J)/2,x=N?0:m(t,v)/2,p=N?0:Y(t,v)/2,a=(g-(e+x)*(g>0?1:-1))*l,A=(C-(n+p)*(C>0?1:-1))*l;return X(g)<X(C)?g>=0&&0>=C?(L.add({x:I+i,y:u-n}),L.add({x:I+i,y:u+A+i-n}),L.add({x:E+i,y:u+A+i-n}),L.add({x:E+i,y:H+p})):0>=g&&C>=0?(L.add({x:I+i,y:u+n}),L.add({x:I+i,y:u+A+i+n}),L.add({x:E+i,y:u+A+i+n}),L.add({x:E+i,y:H-p})):g>=0&&C>=0?(L.add({x:I+i,y:u+n}),L.add({x:I+i,y:u+A-i+n}),L.add({x:E+i,y:u+A-i+n}),L.add({x:E+i,y:H-p})):(L.add({x:I+i,y:u-n}),L.add({x:I+i,y:u+A-i-n}),L.add({x:E+i,y:u+A-i-n}),L.add({x:E+i,y:H+p})):g>=0&&0>=C?(L.add({x:I+e,y:u+i}),L.add({x:I+a+i+e,y:u+i}),L.add({x:I+a+i+e,y:H+i}),L.add({x:E-x,y:H+i})):0>=g&&C>=0?(L.add({x:I-e,y:u+i}),L.add({x:I+a+i-e,y:u+i}),L.add({x:I+a+i-e,y:H+i}),L.add({x:E+x,y:H+i})):g>=0&&C>=0?(L.add({x:I+e,y:u+i}),L.add({x:I+a-i+e,y:u+i}),L.add({x:I+a-i+e,y:H+i}),L.add({x:E-x,y:H+i})):(L.add({x:I-e,y:u+i}),L.add({x:I+a-i-e,y:u+i}),L.add({x:I+a-i-e,y:H+i}),L.add({x:E+x,y:H+i})),r(L,Q)}),D("flex",function(C,h,i){var w=new G,O=C.s("edge.flex")+j(C,i),d=C.s(W),D=C._40I,I=C._41I,p=M(i,C),Q=p.x,$=p.y,e=V(i,C),x=e.x,l=e.y,u=x-Q,t=l-$,c=d?0:m(i,D)/2,T=d?0:Y(i,D)/2,S=d?0:m(i,I)/2,k=d?0:Y(i,I)/2,J=u>0?O:-O,A=t>0?O:-O;return X(u)<X(t)?u>=0&&0>=t?(w.add({x:Q+h,y:$-T}),w.add({x:Q+h,y:$+A+h-T}),w.add({x:x+h,y:l-A+h+k}),w.add({x:x+h,y:l+k})):0>=u&&t>=0?(w.add({x:Q+h,y:$+T}),w.add({x:Q+h,y:$+A+h+T}),w.add({x:x+h,y:l-A+h-k}),w.add({x:x+h,y:l-k})):u>=0&&t>=0?(w.add({x:Q+h,y:$+T}),w.add({x:Q+h,y:$+A-h+T}),w.add({x:x+h,y:l-A-h-k}),w.add({x:x+h,y:l-k})):(w.add({x:Q+h,y:$-T}),w.add({x:Q+h,y:$+A-h-T}),w.add({x:x+h,y:l-A-h+k}),w.add({x:x+h,y:l+k})):u>=0&&0>=t?(w.add({x:Q+c,y:$+h}),w.add({x:Q+J+h+c,y:$+h}),w.add({x:x-J+h-S,y:l+h}),w.add({x:x-S,y:l+h})):0>=u&&t>=0?(w.add({x:Q-c,y:$+h}),w.add({x:Q+J+h-c,y:$+h}),w.add({x:x-J+h+S,y:l+h}),w.add({x:x+S,y:l+h})):u>=0&&t>=0?(w.add({x:Q+c,y:$+h}),w.add({x:Q+J-h+c,y:$+h}),w.add({x:x-J-h-S,y:l+h}),w.add({x:x-S,y:l+h})):(w.add({x:Q-c,y:$+h}),w.add({x:Q+J-h-c,y:$+h}),w.add({x:x-J-h+S,y:l+h}),w.add({x:x+S,y:l+h})),r(w,C)}),D("extend.east",function(F,k,f){var b=new G,Y=F.s(c)+j(F,f),I=F.s(W),L=M(f,F),U=L.x+(I?0:m(f,F._40I)/2),C=L.y,o=V(f,F),h=o.x+(I?0:m(f,F._41I)/2),T=o.y,S=e(U,h)+Y;return C>T?(b.add({x:U,y:C+k}),b.add({x:S+k,y:C+k}),b.add({x:S+k,y:T-k}),b.add({x:h,y:T-k})):(b.add({x:U,y:C-k}),b.add({x:S+k,y:C-k}),b.add({x:S+k,y:T+k}),b.add({x:h,y:T+k})),r(b,F)}),D("extend.west",function(R,H,f){var K=new G,p=R.s(c)+j(R,f),N=R.s(W),S=M(f,R),Y=S.x-(N?0:m(f,R._40I)/2),C=S.y,e=V(f,R),h=e.x-(N?0:m(f,R._41I)/2),U=e.y,Q=T(Y,h)-p;return C>U?(K.add({x:Y,y:C+H}),K.add({x:Q-H,y:C+H}),K.add({x:Q-H,y:U-H}),K.add({x:h,y:U-H})):(K.add({x:Y,y:C-H}),K.add({x:Q-H,y:C-H}),K.add({x:Q-H,y:U+H}),K.add({x:h,y:U+H})),r(K,R)}),D("extend.north",function(F,g,Z){var _=new G,y=F.s(c)+j(F,Z),w=F.s(W),x=M(Z,F),N=x.x,d=x.y-(w?0:Y(Z,F._40I)/2),S=V(Z,F),i=S.x,$=S.y-(w?0:Y(Z,F._41I)/2),b=T(d,$)-y;return N>i?(_.add({y:d,x:N+g}),_.add({y:b-g,x:N+g}),_.add({y:b-g,x:i-g}),_.add({y:$,x:i-g})):(_.add({y:d,x:N-g}),_.add({y:b-g,x:N-g}),_.add({y:b-g,x:i+g}),_.add({y:$,x:i+g})),r(_,F)}),D("extend.south",function(Z,q,N){var F=new G,o=Z.s(c)+j(Z,N),t=Z.s(W),m=M(N,Z),O=m.x,B=m.y+(t?0:Y(N,Z._40I)/2),a=V(N,Z),x=a.x,v=a.y+(t?0:Y(N,Z._41I)/2),C=e(B,v)+o;return O>x?(F.add({y:B,x:O+q}),F.add({y:C+q,x:O+q}),F.add({y:C+q,x:x-q}),F.add({y:v,x:x-q})):(F.add({y:B,x:O-q}),F.add({y:C+q,x:O-q}),F.add({y:C+q,x:x+q}),F.add({y:v,x:x+q})),r(F,Z)});var o=function(q,Z,p,e,F){if(e.sort(function(e,r){var n=e.getSourceAgent()===Z?e.getTargetAgent():e.getSourceAgent(),W=r.getSourceAgent()===Z?r.getTargetAgent():r.getSourceAgent(),i=n.p(),U=W.p();if(p===b||p===P){if(i.y>U.y)return 1;if(i.y<U.y)return-1}else{if(i.x>U.x)return 1;if(i.x<U.x)return-1}return z.sortFunc(e.getId(),r.getId())}),F){for(var I,Y,f,U=q.getSourceAgent(),j=q.getTargetAgent(),E=0;E<e.size();E++){var a=e.get(E);a.getSourceAgent()===U&&a.getTargetAgent()===j||a.getTargetAgent()===U&&a.getSourceAgent()===j?(Y||(Y=new G),Y.add(a,0)):Y?(f||(f=new G),f.add(a)):(I||(I=new G),I.add(a))}e.clear(),I&&e.addAll(I),Y&&e.addAll(Y),f&&e.addAll(f)}var g=e.indexOf(q),h=e.size(),S=q.s(C);return{side:p,index:g,size:h,offset:-S*(h-1)/2+S*g}},s=function(V,n,s,k,z){var K=n.s(u);return o(n,s,k,s.getAgentEdges().toList(function(S){return V.isVisible(S)&&S.s(u)===K}),z)},J=function(H,g){var d=H.getSourceAgent()===g?H.getTargetAgent():H.getSourceAgent(),L=g.p(),n=d.p(),O=n.x-L.x,S=n.y-L.y;return O>0&&X(S)<=O?P:0>O&&X(S)<=-O?b:S>0&&X(O)<=S?N:w},L=function(l,Z,I){var v=Z.s(u),O=J(Z,I);return o(Z,I,O,I.getAgentEdges().toList(function($){return l.isVisible($)&&$.s(u)===v&&J($,I)===O}))},d=function(R,x){var z=R.getSourceAgent()===x,q=z?R.getTargetAgent():R.getSourceAgent(),B=x.p(),y=q.p();return z?B.y>y.y?w:N:B.x<y.x?P:b},U=function(t,S,B){var i=S.s(u),r=d(S,B);return o(S,B,r,B.getAgentEdges().toList(function(_){return t.isVisible(_)&&_.s(u)===i&&d(_,B)===r}),r===P||r===N)},v=function(c,D){var L=c.getSourceAgent()===D,s=L?c.getTargetAgent():c.getSourceAgent(),Y=D.p(),B=s.p();return L?Y.x<B.x?P:b:Y.y>B.y?w:N},n=function(V,A,J){var z=A.s(u),_=v(A,J);return o(A,J,_,J.getAgentEdges().toList(function(Z){return V.isVisible(Z)&&Z.s(u)===z&&v(Z,J)===_}),_===P||_===N)},l=function(d,E,t){var y=d.getSourceAgent(),c=d.getTargetAgent(),_=y.getId()>c.getId(),H=_?c:y,s=_?y:c,F=H.p(),C=s.p(),n=t(E,d,H),S=t(E,d,s),D=d.s(W),T=D?0:m(E,H)/2,Q=D?0:m(E,s)/2,g=D?0:Y(E,H)/2,B=D?0:Y(E,s)/2,h=n.offset,o=S.offset,k=n.side,K=S.side,Z=new G;return k===w?(Z.add({x:F.x+h,y:F.y-g}),Z.add({x:F.x+h,y:C.y+o}),K===b?Z.add({x:C.x-Q,y:C.y+o}):Z.add({x:C.x+Q,y:C.y+o})):k===N?(Z.add({x:F.x+h,y:F.y+g}),Z.add({x:F.x+h,y:C.y+o}),K===b?Z.add({x:C.x-Q,y:C.y+o}):Z.add({x:C.x+Q,y:C.y+o})):k===b?(Z.add({x:F.x-T,y:F.y+h}),Z.add({x:C.x+o,y:F.y+h}),K===N?Z.add({x:C.x+o,y:C.y+B}):Z.add({x:C.x+o,y:C.y-B})):k===P&&(Z.add({x:F.x+T,y:F.y+h}),Z.add({x:C.x+o,y:F.y+h}),K===N?Z.add({x:C.x+o,y:C.y+B}):Z.add({x:C.x+o,y:C.y-B})),_&&Z.reverse(),r(Z,d)};D("ortho2",function(J,n,l){var t,O,A=J.s(W),q=J.s("edge.ortho"),c=J.getSourceAgent(),Q=J.getTargetAgent(),R=c.getId()>Q.getId(),k=R?Q:c,y=R?c:Q,F=k.p(),$=y.p(),o=L(l,J,k),V=L(l,J,y),s=A?0:m(l,k)/2,Z=A?0:Y(l,k)/2,M=A?0:m(l,y)/2,v=A?0:Y(l,y)/2,i=new G,C=o.offset,j=V.offset,S=o.side;return S===P?(t=$.y>F.y?-C:C,O=F.x+s+($.x-M-F.x-s)*q,i.add({x:F.x+s,y:F.y+C}),i.add({x:O+t,y:F.y+C}),i.add({x:O+t,y:$.y+j}),i.add({x:$.x-M,y:$.y+j})):S===b?(t=$.y>F.y?-C:C,O=F.x-s-(F.x-s-$.x-M)*q,i.add({x:F.x-s,y:F.y+C}),i.add({x:O-t,y:F.y+C}),i.add({x:O-t,y:$.y+j}),i.add({x:$.x+M,y:$.y+j})):S===N?(t=$.x>F.x?-C:C,O=F.y+Z+($.y-v-F.y-Z)*q,i.add({x:F.x+C,y:F.y+Z}),i.add({x:F.x+C,y:O+t}),i.add({x:$.x+j,y:O+t}),i.add({x:$.x+j,y:$.y-v})):S===w&&(t=$.x>F.x?-C:C,O=F.y-Z-(F.y-Z-$.y-v)*q,i.add({x:F.x+C,y:F.y-Z}),i.add({x:F.x+C,y:O-t}),i.add({x:$.x+j,y:O-t}),i.add({x:$.x+j,y:$.y+v})),R&&i.reverse(),r(i,J)},!0),D("flex2",function(J,f,F){var p,v=J.getSourceAgent(),H=J.getTargetAgent(),V=v.getId()>H.getId(),a=V?H:v,c=V?v:H,K=a.p(),z=c.p(),q=L(F,J,a),n=L(F,J,c),d=J.s(W),g=J.s("edge.flex")+(q.size-1)/2*J.s(C),e=d?0:m(F,a)/2,B=d?0:Y(F,a)/2,O=d?0:m(F,c)/2,j=d?0:Y(F,c)/2,R=new G,Z=q.offset,X=n.offset,M=q.side;return M===P?(p=z.y>K.y?-Z:Z,R.add({x:K.x+e,y:K.y+Z}),R.add({x:K.x+e+g+p,y:K.y+Z}),R.add({x:z.x-O-g+p,y:z.y+X}),R.add({x:z.x-O,y:z.y+X})):M===b?(p=z.y>K.y?-Z:Z,R.add({x:K.x-e,y:K.y+Z}),R.add({x:K.x-e-g-p,y:K.y+Z}),R.add({x:z.x+O+g-p,y:z.y+X}),R.add({x:z.x+O,y:z.y+X})):M===N?(p=z.x>K.x?-Z:Z,R.add({x:K.x+Z,y:K.y+B}),R.add({x:K.x+Z,y:K.y+B+g+p}),R.add({x:z.x+X,y:z.y-j-g+p}),R.add({x:z.x+X,y:z.y-j})):M===w&&(p=z.x>K.x?-Z:Z,R.add({x:K.x+Z,y:K.y-B}),R.add({x:K.x+Z,y:K.y-B-g-p}),R.add({x:z.x+X,y:z.y+j+g-p}),R.add({x:z.x+X,y:z.y+j})),V&&R.reverse(),r(R,J)},!0),D("extend.north2",function(p,K,U){var Z=p.getSourceAgent(),_=p.getTargetAgent(),M=Z.getId()>_.getId(),F=M?_:Z,o=M?Z:_,J=F.p(),e=o.p(),D=s(U,p,F,w),n=s(U,p,o,w,!0),y=p.s(W),j=y?0:Y(U,F)/2,B=y?0:Y(U,o)/2,v=D.offset,$=n.offset,N=p.s(c)+(D.size-1)/2*p.s(C),i=T(J.y-j,e.y-B)-N+(J.x<e.x?v:-v),I=new G;return I.add({x:J.x+v,y:J.y-j}),I.add({x:J.x+v,y:i}),I.add({x:e.x+$,y:i}),I.add({x:e.x+$,y:e.y-B}),M&&I.reverse(),r(I,p)},!0),D("extend.south2",function($,q,X){var j=$.getSourceAgent(),l=$.getTargetAgent(),M=j.getId()>l.getId(),L=M?l:j,S=M?j:l,Z=L.p(),i=S.p(),F=s(X,$,L,N),g=s(X,$,S,N,!0),U=$.s(W),u=U?0:Y(X,L)/2,p=U?0:Y(X,S)/2,d=F.offset,A=g.offset,o=$.s(c)+(F.size-1)/2*$.s(C),P=e(Z.y+u,i.y+p)+o+(Z.x>i.x?d:-d),h=new G;return h.add({x:Z.x+d,y:Z.y+u}),h.add({x:Z.x+d,y:P}),h.add({x:i.x+A,y:P}),h.add({x:i.x+A,y:i.y+p}),M&&h.reverse(),r(h,$)},!0),D("extend.west2",function(f,X,O){var q=f.getSourceAgent(),j=f.getTargetAgent(),i=q.getId()>j.getId(),B=i?j:q,Q=i?q:j,l=B.p(),u=Q.p(),R=s(O,f,B,w),L=s(O,f,Q,w,!0),$=f.s(W),U=$?0:m(O,B)/2,Z=$?0:m(O,Q)/2,A=R.offset,K=L.offset,n=f.s(c)+(R.size-1)/2*f.s(C),g=T(l.x-U,u.x-Z)-n+(l.y<u.y?A:-A),e=new G;return e.add({x:l.x-U,y:l.y+A}),e.add({x:g,y:l.y+A}),e.add({x:g,y:u.y+K}),e.add({x:u.x-Z,y:u.y+K}),i&&e.reverse(),r(e,f)},!0),D("extend.east2",function(v,g,J){var l=v.getSourceAgent(),V=v.getTargetAgent(),B=l.getId()>V.getId(),Z=B?V:l,j=B?l:V,P=Z.p(),y=j.p(),$=s(J,v,Z,w),O=s(J,v,j,w,!0),D=v.s(W),H=D?0:m(J,Z)/2,f=D?0:m(J,j)/2,n=$.offset,Y=O.offset,R=v.s(c)+($.size-1)/2*v.s(C),N=e(P.x+H,y.x+f)+R+(P.y>y.y?n:-n),Q=new G;return Q.add({x:P.x+H,y:P.y+n}),Q.add({x:N,y:P.y+n}),Q.add({x:N,y:y.y+Y}),Q.add({x:y.x+f,y:y.y+Y}),B&&Q.reverse(),r(Q,v)},!0),D("v.h2",function(E,Z,i){return l(E,i,U)},!0),D("h.v2",function(B,F,R){return l(B,R,n)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);