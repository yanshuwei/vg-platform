!function(v,f){"use strict";var y="ht",Y=v[y],$="position",g="absolute",O="px",J="left",P="top",U="innerHTML",r="className",H="width",k="height",h="0",D="display",m="none",_="visibility",w="user-select",E="margin",V="padding",Q=null,M=Y.Color,o=Y.Default,X=o.getInternal(),R=v.setTimeout,p=v.setInterval,G=v.clearTimeout,s=v.clearInterval,I=v.parseInt,N=o.isLeftButton,c=o.isDragging,A=o.startDragging,b=o.getDistance,C=o.isTouchable,z=M.widgetIconHighlight,Z=M.widgetIconBorder,n=M.widgetIconGradient,x=function(){return document},i=function(B,e){return B.querySelectorAll(e)},l=function(l){var y=x().createElement(l);return"ul"===l&&(q(y,$,"relative"),q(y,E,h),q(y,V,h),q(y,"list-style",m),q(y,"box-sizing","border-box"),q(y,"-moz-box-sizing","border-box"),q(y,D,"inline-block"),q(y,"vertical-align","text-bottom"),q(y,"border","1px solid "+o.contextMenuBorderColor),q(y,"box-shadow","0 0 16px 1px "+o.contextMenuShadowColor),q(y,"overflow","hidden"),o.contextMenuBorderRadius&&q(y,"border-radius",o.contextMenuBorderRadius+O)),y},F=function(g){var I=g.touches[0];return I?I:g.changedTouches[0]},j=function(){return l("div")},d=function(){return l("canvas")},q=function(J,s,F){J.style.setProperty(s,F,Q)},t=function(A,E,b){o.def(Y.widget[A],E,b)},L=function(J,X){J.appendChild(X)},S=function(Q,v){Q.removeChild(v)},K=o.eventListenerOptionsFalse,u=(o.eventListenerOptionsTrue,function(j,z,U,M){j.addEventListener(z,U,M?K:K)}),a=function(N,I,S,d){N.removeEventListener(I,S,d?K:K)};X.addMethod(o,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:Z},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:z}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:Z},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:z,gradient:o.imageGradient,gradientColor:n,background:z}]},contextMenuLabelFont:(C?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var W=function(J){var $=this,K=J._view;if($.$11b=J,$.addListeners(),u(K,"contextmenu",function(X){X.preventDefault()}),!C){var E=$.$37b=$.$36b.bind($);u(K,"mouseover",E),u(K,"mouseout",E)}};o.def(W,f,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(q){if(o.preventDefault(q),N(q)){for(var f=this,h=f.$11b,O=f.getView(),l=O.children,U=0;U<l.length;U++){var J=l[U],u=J.$24b,m=J.$25b;if(u&&u.contains(q.target))return h.scrollUp(J),f.$28b=R(function(){f.$29b=p(function(){h.scrollUp(J)},100)},500),A(f,q),void 0;if(m&&m.contains(q.target))return h.scrollDown(J),f.$28b=R(function(){f.$29b=p(function(){h.scrollDown(J)},100)},500),A(f,q),void 0}C&&(q=F(q)),f.$30b={x:q.pageX,y:q.pageY}}},handle_mousedown:function(g){this.handle_touchstart(g)},handle_touchend:function(p){if(N(p)){var h=this,V=h.$30b,i=C?{x:F(p).pageX,y:F(p).pageY}:{x:p.pageX,y:p.pageY};if(!V||b(V,i)>1)return delete h.$30b,void 0;for(var v=h.getView(),E=h.$11b,$=p.target,R=Q,c=Q,f=E._items,u=v.$26b,T=0;T<u.length;T++)if(c=u[T],c.contains($)){R=c.getAttribute("data-id");break}if(R&&f){var o=E.$17b(f,function(J){return J._id===R});if(o){var A=!1;o.disabled instanceof Function?A=o.disabled.call(E,o):o.disabled===!0&&(A=!0),A||(o.items?C&&h.$36b(c,!0):E.$1b(o,p))}}delete h.$30b}},$36b:function(M,m){if(!c()){var s,R=this,Q=R.$11b,y=R.getView(),A=Q.$20b||y.children[0],Y=Q.$19b,T=y.$26b,h=y.children,D=M.target,x=y.getBoundingClientRect(),L=o.getWindowInfo(),w=L.width,X=L.height,W=function(B){for(var m=0;m<h.length;m++){var $=h[m],W=new RegExp(B+"$"),E=$[r];if(E&&(W.test(E)||E.indexOf(B+" ")>=0))return $}},N=function(N){for(var B=0;B<T.length;B++){var v=T[B],G=new RegExp(N+"$"),X=v[r];if(X&&(G.test(X)||X.indexOf(N+" ")>=0))return v}},E=function(M){var F=N("menu-item"+M.$45b),j=F.getBoundingClientRect(),E=j.top-x.top,l=j.left-x.left;q(M,P,E+O),q(M,J,l+j.width+O);var b=M.getBoundingClientRect(),c=b.top,I=b.left,m=b.height,U=b.width,S=c+m+2,v=I+U+2;S>X&&q(M,P,E+X-S+O),v>w&&q(M,J,l-U+O)};if(m)s=M;else{if("mouseover"===M.type){for(var d=0;d<T.length;d++){var g=T[d];if(g.contains(D)){s=g;break}}if(!s&&Y){var Z=Y.parentNode,H=W("submenu"+Y.getAttribute("data-id"));(H&&H.contains(D)||Z&&Z.contains(D))&&(s=Y)}}else if("mouseout"===M.type){for(var G=!1,u=M.relatedTarget,d=0;d<h.length;d++){var e=h[d];if("hidden"!==e.style.visibility&&e.contains(u)){G=!0;break}}if(G)return}!s&&A&&(s=N("menu-item"+(A.$45b||"NaN")))}if(s!=Y){if(Y)for(var $=Y;$;){if($[r]=$[r].replace(" menu-item-hover",""),$[r].indexOf("disabled")<0){var j=Q.getItemByProperty("_id",$.getAttribute("data-id"));null!=j.background?j.background instanceof Function?q($,"background-color",j.background.call(Q,j)):q($,"background-color",j.background):q($,"background-color",o.contextMenuBackground),q($,"color",o.contextMenuLabelColor)}var v=W("submenu"+$.getAttribute("data-id"));v&&q(v,_,"hidden");var t=$.parentNode;$=N("menu-item"+(t.$45b||"NaN"))}if(s){for(var K=s,B=[];K;){K[r]+=" menu-item-hover",K[r].indexOf("disabled")<0&&(q(K,"background-color",o.contextMenuHoverBackground),q(K,"color",o.contextMenuHoverLabelColor));var p=W("submenu"+K.getAttribute("data-id"));p&&(q(p,_,"visible"),B.push(p));var t=K.parentNode;K=N("menu-item"+(t.$45b||"NaN"))}B.reverse(),B.forEach(function(T){E(T)})}}Q.$19b=s,Q.$20b=s?s.parentNode:y.children[0]}},handle_mouseup:function(T){this.handle_touchend(T)},handleWindowTouchEnd:function(){var T=this;T.$28b!=Q&&(G(T.$28b),delete T.$28b),T.$29b!=Q&&(s(T.$29b),delete T.$29b),delete T.$34b,delete T.$30b,delete T.$35b},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handle_mousemove:function(X){this.handle_touchmove(X)},handle_touchmove:function(k){if(!c()&&N(k)){for(var x=this,E=x.getView().children,P=Q,j=0;j<E.length;j++){var W=E[j];if(W.contains(k.target)){P=W;break}}var J=x.$30b,y=C?{x:F(k).pageX,y:F(k).pageY}:{x:k.pageX,y:k.pageY};P&&J&&b(J,y)>2&&(A(x,k),x.$34b=P,x.$35b=P.$18b)}},handleWindowTouchMove:function(r){r.preventDefault();var L=this,o=L.$11b,O=L.$34b,R=L.$35b,H=L.$30b;if(H&&O){var d=C?{x:F(r).pageX,y:F(r).pageY}:{x:r.pageX,y:r.pageY},g=d.y-H.y;g>0?o.scrollUp(O,O.$18b-(R-g)):o.scrollDown(O,R-g-O.$18b)}},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},$10b:function(V,_){V.preventDefault();for(var p=this,B=p.getView().children,c=Q,X=0;X<B.length;X++){var h=B[X];if(h.contains(V.target)){c=h;break}}if(c){var F=this.$11b,I=F.getRowHeight();Math.abs(_)>.05&&(_>0?F.scrollUp(c,_*I):0>_&&F.scrollDown(c,-_*I))}},handle_mousewheel:function(j){this.$10b(j,j.wheelDelta/40)},handle_DOMMouseScroll:function(k){this.$10b(k,-k.detail)},$44b:function(k){this.getView().contains(k.target)||this.$11b.hide()},$41b:function(W){this.$11b.show(W)},$4b:function(F,a){var U=this.$11b;if(a=a||U._items,a&&a.length&&F.keyCode){var A=[F.keyCode];F.shiftKey&&A.push(16),F.ctrlKey&&A.push(17),F.altKey&&A.push(18),/mac/.test(v.navigator?v.navigator.userAgent.toLowerCase():"")?F.metaKey&&A.push(17):F.metaKey&&A.push(91),A.sort();var y=A.join(),j=U.$17b(a,function(s){if(s.key){var M=s.key.slice(0);return M.sort(),y===M.join()}});if(j){j.preventDefault!==!1&&F.preventDefault();var r=!1;j.disabled instanceof Function?r=j.disabled.call(U,j):j.disabled===!0&&(r=!0),r||U.$1b(j,F)}}},$39b:function(q){var O=this,E=F(q);O.$32b={x:E.pageX,y:E.pageY}},$38b:function(I){var D=this,_=F(I);D.$31b={x:_.pageX,y:_.pageY},D.$33b=R(function(){D.$31b&&(D.$32b?b(D.$31b,D.$32b)<10&&D.$11b.show(I):D.$11b.show(I)),delete D.$33b,delete D.$31b,delete D.$32b},600)},$40b:function(){var B=this;B.$33b!=Q&&(G(B.$33b),delete B.$33b,delete B.$31b,delete B.$32b)}}),Y.widget.ContextMenu=function(D){var _=this,k=_._view=X.createView(null,_);k[r]="ht-widget-contextmenu",_.setItems(D),_.$13b=new W(_),q(k,"font",o.contextMenuLabelFont),q(k,$,g),q(k,"cursor","default"),q(k,"-webkit-"+w,m),q(k,"-moz-"+w,m),q(k,"-ms-"+w,m),q(k,w,m),q(k,"box-sizing","border-box"),q(k,"-moz-box-sizing","border-box"),o.baseZIndex!=Q&&q(k,"z-index",I(o.baseZIndex)+2+""),_.$3b=function(b){_.$13b.$4b(b)}},t("ContextMenu",f,{$5b:0,_items:Q,$21b:Q,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var S=this,q=S._enableGlobalKey;q===!1&&(u(x(),"keydown",S.$3b),S._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,a(x(),"keydown",this.$3b)},setItems:function(Q){this._items=Q},getItems:function(){return this._items},setVisibleFunc:function(m){this.$16b=m},setLabelMaxWidth:function(C){this.$43b=C},$1b:function(J,O){var I=this;if("check"===J.type)J.selected=!J.selected;else if("radio"===J.type){var X=J.groupId;I.$17b(I._items,function(g){g.groupId===X&&(g.selected=!1)}),J.selected=!0}if(I.hide(),J.action)J.action.apply(J.scope||I,[J,O]);else if(J.href){var o=J.linkTarget||"_self";v.open(J.href,o)}},getItemById:function(R){return this.getItemByProperty("id",R)},setItemVisible:function(U,D){var j=this.getItemById(U);j&&(j.visible=D)},getItemByProperty:function(h,w,d){var c=this;if(d=d||c._items,!d||0===d.length)return Q;var A=c.$17b(d,function(I){return I[h]===w});return A||Q},scrollUp:function(k,r){var O=this;if(r=r==Q?20:r,r=I(r),0!==r){var R=0;k.$18b>r&&(R=k.$18b-r),O.$42b(k,R),k.scrollTop=R,k.$18b=R}},scrollDown:function(p,g){var B=this;if(g=g==Q?20:g,g=I(g),0!==g){var m=p.$22b,o=p.$23b,$=m-o;o+p.$18b+g<m&&($=p.$18b+g),B.$42b(p,$),p.scrollTop=$,p.$18b=$}},$42b:function(t,g){g=g==Q?t.$18b:g;var x=t.$24b,C=t.$25b;x&&(q(x,"top",g+O),0==g?q(x,D,m):q(x,D,"block")),C&&(q(C,"bottom",-g+O),g==t.$22b-t.$23b?q(C,D,m):q(C,D,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(C,n){for(var M=0;M<C.length;M++){var m=C[M];if(n(m))return m;if(m.items){var L=this.$17b(m.items,n);if(L)return L}}},$2b:function(R,e){for(var Q=this,B=0;B<R.length;B++){Q.$5b++;var N=R[B];if(N.visible!==!1&&!(o.isFunction(N.visible)&&N.visible()===!1||Q.$16b&&!Q.$16b.call(Q,N))){var F=l("li"),n=Q.$5b+"";if(q(F,"white-space","nowrap"),q(F,D,"block"),"separator"===N||N.separator===!0){var K=j();K[r]="separator",q(K,k,o.contextMenuSeparatorWidth+O),q(K,"background",o.contextMenuSeparatorColor),L(F,K)}else{N._id=n,F.setAttribute("data-id",n);var y=l("span"),J=l("span"),t=d(),p=j();if(q(y,D,"inline-block"),q(y,k,"1.2em"),q(J,D,"inline-block"),q(J,k,"1.2em"),q(J,"line-height","1.2em"),t[r]="prefix",q(t,D,"inline-block"),q(t,H,"1em"),q(t,k,"1em"),q(t,"vertical-align","middle"),q(t,E,"0 0.2em"),"check"===N.type&&N.selected?t[r]+=" check-prefix":"radio"===N.type&&N.selected&&(t[r]+=" radio-prefix"),L(F,t),N.icon){var m=d();m[r]="contextmenu-item-icon",q(m,D,"inline-block"),q(m,k,"1.2em"),q(m,H,"1.2em"),q(m,"margin-right","0.2em"),q(m,"float","left"),m.$50b=N.icon,m._item=N,L(y,m)}if(J[U]=N.label,L(y,J),L(F,y),p[r]="suffix",q(p,D,"inline-block"),q(p,"margin-left","1em"),q(p,"margin-right","0.4em"),q(p,"text-align","right"),q(p,"font-size","75%"),N.items&&(p[U]=o.contextMenuSubmenuMark),N.suffix&&(p[U]=N.suffix),L(F,p),F[r]="menu-item menu-item"+n,null!=N.background?N.background instanceof Function?q(F,"background-color",N.background.call(Q,N)):q(F,"background-color",N.background):q(F,"background-color",o.contextMenuBackground),q(F,"color",o.contextMenuLabelColor),q(F,V,"3px 0"),N.disabled instanceof Function){var A=N.disabled.call(Q,N);A&&(F[r]+=" disabled",q(F,"color",o.contextMenuDisabledLabelColor))}else N.disabled&&(F[r]+=" disabled",q(F,"color",o.contextMenuDisabledLabelColor));if(N.items){Q.$21b||(Q.$21b=new Y.List);var T=l("ul");T[r]="submenu"+n,T.$45b=n,q(T,_,"hidden"),q(T,$,g),L(Q._view,T),Q.$21b.add(T),Q.$2b(N.items,T)}}L(e,F)}}},rebuild:function(){var q=this,$=q._items,g=q._view;if(g&&(g[U]="",q.$21b=Q,q.$5b=0,q.$19b=Q,q.$20b=Q,g.$26b=Q,$&&0!==$.length)){var o=l("ul",q._r);L(g,o),q.$2b($,o)}},addTo:function(h){if(h){var S=this,U=S.$13b;if(S.$12b=h,S.$9b=function(O){U.$44b(O)},S.$27b=function(g){U.$41b(g)},C){var Y=S.$6b=function(N){U.$38b(N)},I=S.$7b=function(t){U.$39b(t)},P=S.$8b=function(Q){U.$40b(Q)};u(h,"touchstart",Y,!0),u(h,"touchmove",I),u(h,"touchend",P)}else u(h,"contextmenu",S.$27b)}},showOnView:function(K,B,g){K=K.getView?K.getView():K;var J=o.getWindowInfo(),L=K.getBoundingClientRect();this.show(L.left+J.left+B,L.top+J.top+g)},show:function(N,d,W){var _=this,W=W==Q?!0:!1,v=_._view;if(v){if(_.invalidate(),1===arguments.length){var n=N;if(C){var X=F(n);N=X.pageX,d=X.pageY}else N=n.pageX,d=n.pageY}var z=o.getWindowInfo(),E=z.width,s=z.height,Y=z.left,m=z.top,I={pageX:N,pageY:d,clientX:N-Y,clientY:d-m,target:1,originEvent:n},y=I.clientX,e=I.clientY,A=function(Y){Y.style.height=s-6+O;var W=j(),T=j(),m=function(B){q(B,$,g),q(B,"text-align","center"),q(B,H,"100%"),q(B,"font-size",10+O),q(B,"padding","2px 0"),q(B,"border","0px solid "+o.contextMenuScrollerBorderColor),q(B,"background-color",o.contextMenuScrollerColor1),B.style.backgroundImage="-webkit-linear-gradient(top, "+o.contextMenuScrollerColor1+", "+o.contextMenuScrollerColor2+")",B.style.backgroundImage="linear-gradient(to bottom, "+o.contextMenuScrollerColor1+", "+o.contextMenuScrollerColor2+")"};W[r]="menu-arrow-item menu-arrow-item-top",T[r]="menu-arrow-item menu-arrow-item-bottom",m(W),q(W,"top",h),q(W,"left",h),q(W,"border-bottom-width",1+O),W[U]="▲",m(T),q(T,"bottom",h),q(T,"left",h),q(T,"border-top-width",1+O),T[U]="▼",Y.$24b=W,Y.$25b=T,Y.$18b=Y.scrollTop,Y.$22b=Y.scrollHeight,Y.$23b=Y.clientHeight,L(Y,W),L(Y,T),_.$42b(Y)};_.beforeShow&&_.beforeShow(I);var K=_._items;if(K&&(n&&n.preventDefault(),K.length)){_.rebuild(),o.appendToScreen(v),v.$26b=i(v,".menu-item");var G=v.children[0];G.offsetHeight>s&&A(G);var T=e+(W?1:0),M=y+(W?1:0),B=function(K){for(var z=0,l=0,m=0,k=_.$43b;m<K.children.length;m++){var x=K.children[m];if(x.getAttribute("data-id")){var Z=x.children[1],E=x.children[2],J=Z.children;if(k){var e=J[0];J.length>1&&(e=J[1]),e.offsetWidth>k&&(e[U]="<marquee scrollamount='3'>"+e[U]+"</marquee>",e.children[0].style.verticalAlign="text-bottom",q(e,H,k+O),q(e,D,"inline-block"))}var c=Z.offsetWidth,W=E.offsetWidth;c>z&&(z=c),W>l&&(l=W)}}for(m=0;m<K.children.length;m++){var x=K.children[m];if(x.getAttribute("data-id")){var Z=x.children[1],E=x.children[2],n=Z.children[0],i=Z.children[1];!i&&n.style.width&&q(n,H,z+O),q(Z,H,z+O),q(E,H,l+O)}}};B(G);var R=e+3+v.offsetHeight,c=y+3+v.offsetWidth;R>s?q(v,P,T-(R-s)+m+O):q(v,P,T+m+O),c>E?q(v,J,M-(c-E)+Y+O):q(v,J,M+Y+O);var Z=_.$21b;Z&&Z.each(function(V){B(V),V.offsetHeight>s&&A(V)}),_.$9b&&u(x(),C?"touchstart":"mousedown",_.$9b,!0),_.afterShow&&_.afterShow(I),_.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=Q:!1},getRelatedView:function(){return this.$12b},hide:function(){var f=this,p=f._view;p&&p.parentNode&&(S(p.parentNode,p),a(x(),C?"touchstart":"mousedown",f.$9b,!0),f.afterHide&&f.afterHide())},dispose:function(){var Y=this,H=Y.$12b,N=Y._view;N&&(N.parentNode&&S(N.parentNode,N),Y.disableGlobalKey(),H&&(C?(a(H,"touchstart",Y.$6b,!0),a(H,"touchmove",Y.$7b),a(H,"touchend",Y.$8b)):a(H,"contextmenu",Y.$27b)),Y._view=Y._items=Y.$21b=Y.$19b=Y.$12b=Y.beforeShow=Y.afterShow=Y.afterHide=Y.$9b=Y.$3b=Y.$6b=Y.$7b=Y.$8b=Y.$27b=Q)},$46b:function(O,q,A,$,z){var k=X.initContext(O);X.translateAndScale(k,0,0,1),k.clearRect(0,0,A,$),o.drawStretchImage(k,o.getImage(q),"fill",0,0,A,$,z,this),k.restore()},$47b:function(){var h,Q,n,$=this,L=$._view;if($.isShowing()){var T=i(L,".check-prefix");for(n=0;n<T.length;n++){var p=T[n];h=p.clientWidth,Q=p.clientHeight,p.$48b=h,p.$49b=Q,X.setCanvas(p,h,Q)}var W=i(L,".radio-prefix");for(n=0;n<W.length;n++){var c=W[n];h=c.clientWidth,Q=c.clientHeight,c.$48b=h,c.$49b=Q,X.setCanvas(c,h,Q)}var q=i(L,".contextmenu-item-icon");for(n=0;n<q.length;n++){var A=q[n];h=A.clientWidth,Q=A.clientHeight,A.$48b=h,A.$49b=Q,X.setCanvas(A,h,Q)}}},validateImpl:function(){var t,L,z,W=this,k=W._view;if(W.isShowing()){var P=i(k,".check-prefix");for(z=0;z<P.length;z++){var w=P[z];t=w.$48b,L=w.$49b,t&&L&&W.$46b(w,o.contextMenuCheckIcon,t,L)}var r=i(k,".radio-prefix");for(z=0;z<r.length;z++){var M=r[z];t=M.$48b,L=M.$49b,t&&L&&W.$46b(M,o.contextMenuRadioIcon,t,L)}var m=i(k,".contextmenu-item-icon");for(z=0;z<m.length;z++){var V=m[z];t=V.$48b,L=V.$49b,t&&L&&W.$46b(V,o.getImage(V.$50b),t,L,V._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);