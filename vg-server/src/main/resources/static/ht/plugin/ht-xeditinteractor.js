!function(h,k,O){"use strict";var X="ht",$=h[X],w=$.Default,Q=$.graph,d=w.getInternal(),H=d.ui(),m=H.NodeUI.prototype,P=H.ShapeUI.prototype,Z=Q.GraphView,e=Z.prototype,J=H.EdgeUI.prototype,G=$.Node,T=$.Shape,D=$.Edge,b=$.Group,W=w.isTouchable,F=w.preventDefault,n=h.setTimeout,r=w.grow,g=w.isDragging,E=w.getDistance,v=null,p=$.List,u="undefined"!=typeof Float32Array?Float32Array:Array,C=Math,M=C.PI,Y="Crossing",o="No Crossing",l=M/2,t=2*M,A=C.atan2,s=C.sqrt,f=C.pow,N=C.sin,q=C.cos,x=C.min,K=C.max,z=C.abs,c=C.ceil,_=C.round,y=w.unionPoint,S=w.unionRect,i=w.containsPoint,B=w.clone,L="rgb(52, 152, 219)",j="red",I={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},a={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var u=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],Q=0;Q<u.length;Q++){var I=u[Q];I=0===Q%2?I/400*a.width:I/100*a.height,u[Q]=I}return a.width>120&&(u[4]=a.width-26,u[6]=a.width-40,u[10]=a.width-40,u[12]=a.width-26,u[18]=33),u}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},V={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:L,rotation:.61},{type:"circle",rect:[200,120,70,70],background:L,rotation:.61},{type:"circle",rect:[200,220,70,70],background:L,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:L},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:L}]},U={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:j,rotation:.61}]},R={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:L},{type:"circle",rect:[0,210,90,90],background:L},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:L}]},ld={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:j},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:j}]},wk={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:L}]},zf={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:j}]},uk={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Hh={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Po=function(P){var y=P.touches[0];return y?y:P.changedTouches[0]},In=function(i,l,s,_){return A(_-l,s-i)},Gr=function(N,a){return{x:N.x*a,y:N.y*a}},Te=function(m,U){m.each(function(T){return m.isSelected(T)?U(T):void 0})},_g=function(b,x){b.reverseEach(function(e){return b.isSelected(e)?x(e):void 0})},ss=function(L,U,E){var C,y,l,Y,$,w=this,e=U,P=w.gv;if(L instanceof T){l=L.getSegments();var c=P.getDataUI(L);$=c._55O.$15l,l&&l.size()||(l=ng($)),L.isClosePath()&&l.indexOf(5)<0&&(l=new p(l._as),l.add(5)),C=ql(L,c,e),y=$[C]}else{var t=P.getDataUI(L);$=Xq(t,L.s("edge.points")),l=L.s("edge.segments"),l&&l.size()||(l=ng($)),$=$._as,C=ql(L,t,e),y=$[C]}if(l&&(Y=l.get(e)),2===Y||1===Y||5===Y){var R=$[C+1];5===Y&&(R=$[0]);var B=Xb(y,E,R);return B}return E},ds=function(V,F,P,U){var Y=F/2,l=P/2,u=jp(V,-Y,-l,U),v=jp(V,Y,-l,U),z=jp(V,-Y,l,U),k=jp(V,Y,l,U),O=jp(V,0,-l,U),H=jp(V,Y,0,U),C=jp(V,0,l,U),m=jp(V,-Y,0,U);return[u,v,z,k,O,H,C,m]},Xb=function(c,G,t){var b={x:G.x-c.x,y:G.y-c.y},N={x:t.x-c.x,y:t.y-c.y},P=s(f(t.x-c.x,2)+f(t.y-c.y,2)),q={x:N.x/P,y:N.y/P},J=b.x*q.x+b.y*q.y,k={x:q.x*J,y:q.y*J};return{x:c.x+k.x,y:c.y+k.y}},jp=function(z,A,Q,j){var u=q(j)*A-N(j)*Q,W=N(j)*A+q(j)*Q;return z?{x:z.x+u,y:z.y+W}:{x:u,y:W}},sm=function(G,$){return $>2*G?G:$/2},Hf=function(z,f,G,t){var A=E(z,f);return G=t?x(G,A):sm(G,A),A?G/=A:G=0,{x:z.x+(f.x-z.x)*G,y:z.y+(f.y-z.y)*G}},Vj=function(R,n){var J,z,U=R.gv,O=R._data,Y=O._40I,h=O._41I,u=O.s("edge.offset"),i=O.s("edge.source.position"),T=O.s("edge.target.position"),j=O.s("edge.source.offset.x"),w=O.s("edge.source.offset.y"),c=O.s("edge.target.offset.x"),W=O.s("edge.target.offset.y"),B=O.s("edge.source.anchor.x"),Z=O.s("edge.source.anchor.y"),E=O.s("edge.target.anchor.x"),D=O.s("edge.target.anchor.y");if(n?(J=d.getEdgeAgentPosition(U,Y,i,j,w,B,Z),z=d.getEdgeAgentPosition(U,h,T,c,W,E,D)):(J=d.getEdgeAgentPosition(U,Y,i,0,0,B,Z),z=d.getEdgeAgentPosition(U,h,T,0,0,E,D)),"points"===O.s("edge.type")&&u&&!O.s("edge.center")&&J){var g=O.s("edge.points")||new p,V=g.size(),M=Hf(J,V?g.get(0):z,u,V),y=Hf(z,V?g.get(V-1):J,u,V);J=M,z=y}return[J,z]},Xq=function(h,b,Z){var C=h._78o,Y=h._data,B=Y.s("edge.type"),w=[C.sourcePoint,C.targetPoint];return"points"===B?Z&&(w=Vj(h)):w=C.center?B?Z?Vj(h):Vj(h,!0):Z?Vj(h):[C.c1,C.c2]:Z?Vj(h):Vj(h,!0),b=new p(b?b._as:v),b.add(w[0],0),b.add(w[1]),b},Sq=function(x){return x=new p(x._as),x.removeAt(0),x.removeAt(x.size()-1),x},ng=function(d){d._as||(d=new p(d));var o=new p;o.add(1);for(var Q=1;Q<d.size();Q++)o.add(2);return o},xb=function(Q,f){return{x:(Q.x+f.x)/2,y:(Q.y+f.y)/2}},Rd=function(A,z){return{x:A.x+1*(z.x-A.x)/4,y:A.y+1*(z.y-A.y)/4}},Xc=function(E,N){return{x:E.x+3*(N.x-E.x)/4,y:E.y+3*(N.y-E.y)/4}},Dh=function(F,e,m,G){var n=e.x+e.width/2,k=e.y+e.height/2,U=s(n*n+k*k),J=A(k,n)+m;return{x:G.x+U*q(J),y:G.y+U*N(J)}},iq=e.validateImpl,Oh=e.isRectEditable,Eh=e.isPointEditable,Zn=e._42,Ld=P._79o,wr=J._79o,Re=P._48O,Tb=P._47O,vf=m._48O,mj=m._80o,Rc=P._80o,gh=m.getSelectWidth,kg=m._47O,gm=J._47O,cn=e.isEditable,vd=["northwest","north","northeast","east","southeast","south","southwest","west"],Qb=function(u,j,r,W,N,f,b,Q,P,Z){var D=u.x,R=u.y,p=u.width,z=u.height,O={x:D+p/2,y:R+z/2};W=W||0,j=jp(O,j.x-O.x,j.y-O.y,-W),b&&!Q&&(j.x+=P,j.y+=Z);var E=.01;if("northwest"===r?(j.x+N>D+p-E&&(j.x=D+p-N-E),j.y+N>R+z-E&&(j.y=R+z-N-E),u=y(j,{x:D+p,y:R+z})):"north"===r?(j.y+N>R+z-E&&(j.y=R+z-N-E),u=y({x:D,y:j.y},{x:D+p,y:R+z})):"northeast"===r?(j.x<D+N+E&&(j.x=D+N+E),j.y+N>R+z-E&&(j.y=R+z-N-E),u=y({x:D,y:j.y},{x:j.x,y:R+z})):"west"===r?(j.x+N>D+p-E&&(j.x=D+p-N-E),u=y({x:j.x,y:R},{x:D+p,y:R+z})):"east"===r?(j.x<D+N+E&&(j.x=D+N+E),u=y({x:D,y:R},{x:j.x,y:R+z})):"southwest"===r?(j.x+N>D+p-E&&(j.x=D+p-N-E),j.y<R+N+E&&(j.y=R+N+E),u=y({x:j.x,y:R},{x:D+p,y:j.y})):"south"===r?(j.y<R+N+E&&(j.y=R+N+E),u=y({x:D,y:R},{x:D+p,y:j.y})):"southeast"===r&&(j.x<D+N+E&&(j.x=D+N+E),j.y<R+N+E&&(j.y=R+N+E),u=y({x:D,y:R},j)),"keepRatio"===f&&(!b&&Q||b&&!Q)&&("northeast"===r||"southeast"===r||"northwest"===r||"southwest"===r)){var w=u.width,c=u.height,S=w/p,M=c/z,X=x(S,M);u.width=p*X,u.height=z*X,"northeast"===r?u.y=R+(z-u.height):"northwest"===r?(u.y=R+(z-u.height),u.x=D+(p-u.width)):"southwest"===r&&(u.x=D+(p-u.width))}u.x-=O.x,u.y-=O.y;var $=Dh(v,u,W,O);return u.x=$.x-u.width/2,u.y=$.y-u.height/2,u},sc=function(L,B,e,U){var j=L.getRotation(),o=B,X=o.x,h=o.y,O=o.width,g=o.height,v={x:X+o.width/2,y:h+o.height/2};U=jp(v,U.x-v.x,U.y-v.y,-j),"northwest"===e?o=y(U,{x:X+O,y:h+g}):"north"===e?o=y({x:X,y:U.y},{x:X+O,y:h+g}):"northeast"===e?o=y({x:X,y:U.y},{x:U.x,y:h+g}):"west"===e?o=y({x:U.x,y:h},{x:X+O,y:h+g}):"east"===e?o=y({x:X,y:h},{x:U.x,y:h+g}):"southwest"===e?o=y({x:U.x,y:h},{x:X+O,y:U.y}):"south"===e?o=y({x:X,y:h},{x:X+O,y:U.y}):"southeast"===e&&(o=y({x:X,y:h},U)),L.setRect(o),o.x-=v.x,o.y-=v.y;var G=Dh(L,o,j,v);L.p(G.x,G.y)},$f=function(m,H,q,p,J,b,r,$){var n=v;b?(n=jp(v,J.x-H.x,J.y-H.y,-q),n.x-=r.x,n.y-=r.y):n=jp(v,J.x-H.x,J.y-H.y,0);var V={x:H.x+n.x,y:H.y+n.y};$&&(V=$(V.x,V.y)),V.e=m.getPoints().get(p).e,m.setPoint(p,V);var O=m.getWidth(),t=m.getHeight(),Z=m.p().x-O/2,U=m.p().y-t/2;Z-=H.x,U-=H.y;var D=Dh(m,{x:Z,y:U,width:O,height:t},q,H);m.p(D.x,D.y)},ql=function(K,V,_){var W,f;if(K instanceof T?(W=K.getPoints(),f=K.getSegments()):K instanceof D&&"points"===K.s("edge.type")&&(W=K.s("edge.points"),f=K.s("edge.segments"),W=Xq(V,W)),f&&f.size()||(f=ng(W)),K instanceof T&&K.isClosePath()&&f.indexOf(5)<0&&(f=new p(f._as),f.add(5)),f)for(var U=-1,J=0;J<f.size();J++){if(J===_)return U;var G=f.get(J);1===G?U+=1:2===G?U+=1:3===G?U+=2:4===G&&(U+=3)}},Nk=function(j,E,F){var G,Z;if(j instanceof T?(G=j.getPoints(),Z=j.getSegments()):j instanceof D&&"points"===j.s("edge.type")&&(G=j.s("edge.points"),Z=j.s("edge.segments"),G=Xq(E,G)),Z&&Z.size()||(Z=ng(G)),Z)for(var x=-1,f=0;f<Z.size();f++){var W=Z.get(f);if(1===W?x+=1:2===W?x+=1:3===W?x+=2:4===W&&(x+=3),x===F)return f}},Fh=function(u,I){var a=[u[0]-I[0],u[1]-I[1],u[2]-I[2]];return a},Rm=function(){var X=new u(16);return X[0]=1,X[1]=0,X[2]=0,X[3]=0,X[4]=0,X[5]=1,X[6]=0,X[7]=0,X[8]=0,X[9]=0,X[10]=1,X[11]=0,X[12]=0,X[13]=0,X[14]=0,X[15]=1,X},Vl=function(D,I){var Y=D[0],P=D[1],v=D[2];return D[0]=I[0]*Y+I[4]*P+I[8]*v+I[12],D[1]=I[1]*Y+I[5]*P+I[9]*v+I[13],D[2]=I[2]*Y+I[6]*P+I[10]*v+I[14],D},Vk=function(W,H){if(H){var M=N(H),I=q(H),$=W[0],S=W[1],g=W[2],_=W[3],L=W[8],T=W[9],b=W[10],O=W[11];W[0]=$*I-L*M,W[1]=S*I-T*M,W[2]=g*I-b*M,W[3]=_*I-O*M,W[8]=$*M+L*I,W[9]=S*M+T*I,W[10]=g*M+b*I,W[11]=_*M+O*I}},Eo=function(v,V){for(var w=v.s("grid.row.count"),r=v.s("grid.column.count"),j=0;w>j;j++)for(var W=0;r>W;W++){var I=v.getCellRect(j,W);if(i(I,V))return{rowIndex:j,columnIndex:W,rect:I,grid:v}}return null},se=function(T,f,U,O,u,s){var a={},F=U-T,W=O-f,e=C.sqrt(F*F+W*W),L=F/e,X=W/e,K=(-T+u)*L+(-f+s)*X;return 0>=K?(a.x=T,a.y=f):K>=e?(a.x=U,a.y=O):(a.x=T+K*L,a.y=f+K*X),F=u-a.x,W=s-a.y,a.z=C.sqrt(F*F+W*W),a},Ah=function(s,S){var W,e,X,t,m,x,k,a,N=s.getPoints(),Y=s.getSegments(),C=s.p(),G=s.getRotation();if(!Y||!(Y.indexOf(3)>0||Y.indexOf(4)>0)){for(a=0;a<=N.size()-1;a++)if(a===N.size()-1?(m=N.get(0),t=N.get(a)):(t=N.get(a),m=N.get(a+1)),t=jp(C,t.x-C.x,t.y-C.y,G),m=jp(C,m.x-C.x,m.y-C.y,G),x=se(t.x,t.y,m.x,m.y,S.x,S.y),k=x.z,k<(s.s("shape.border.width")||10)){e=t,X=m,W=a;break}if(W!=v){var w=se(e.x,e.y,X.x,X.y,S.x,S.y),o=E(e,w);return{attachIndex:W,attachOffset:o}}}},Cn=function(X){for(var G=X._data,M=G.p(),Q=G.getRotation(),e=G.getPoints(),B=v,r=[],T=0;T<e.size();T++)B=e.get(T),r.push(jp(M,B.x-M.x,B.y-M.y,Q));X._55O.$15l=r};w.setImage("xeditinteractor_parentIcon",V),w.setImage("xeditinteractor_hostIcon",U),w.setImage("xeditinteractor_edgeIcon",R),w.setImage("xeditinteractor_removeIcon",ld),w.setImage("xeditinteractor_sourceIcon",wk),w.setImage("xeditinteractor_targetIcon",zf),w.setImage("xeditinteractor_elevationIcon",uk),w.setImage("xeditinteractor_tallIcon",Hh),e._editPointSize=W?24:9,e._edgeHelpers=["parent","remove","source","target"],e._leftTopHelpers=["parent"],e._rightTopHelpers=["host"],e._leftBottomHelpers=["edge"],e._rightBottomHelpers=["remove"],vd=vd.concat(vd).concat(vd),J._79o=function(){var g=this,o=g.gv,n=o.getZoom(),G=o._editInteractor,A=wr.call(g);if(!A)return null;var O=Vj(g,!0),e=O[0],w=O[1],E={x:A.x,y:A.y,width:A.width,height:A.height},p=y(e,w);if(G instanceof Q.XEditInteractor){E=S(E,p);var P=g._55O,C=o.getEditPointSize()/n+2,m=0;P&&P._43O&&(m+=C/2,r(E,m))}return E},J._47O=function(d){var f=this,F=f.gv,y=F._editInteractor;y instanceof Q.XEditInteractor||gm.call(f,d)},J.rectIntersects=function(i){var e=this,h=e._data,c=e.gv,b=c.getZoom(),j=e._55O,z=c._editInteractor;if(z instanceof Q.XEditInteractor&&c.isEditable(h)&&j&&j._43O&&"points"===h.s("edge.type")){var S=h.s("edge.points"),Z=h.s("edge.segments");S=Xq(e,S),Z&&Z.size()||(Z=ng(S)),S=S._as;var t=!1,L=W?5:1,m=i.x+L,$=i.y+L,A={x:m,y:$};if(z._edge===h&&z._hoverSegmentIndex>=0){var N=c._editInteractor._hoverSegmentIndex,g=Z.get(N),x=ql(h,e,N),D=v;if(x!=v&&x>=0){var H=S[x],f=c.getSegmentHoverWidth()/b;if(2===g||1===g){var T=S[x+1];D=gg(new $h(H.x,H.y),new $h(T.x,T.y),new $h(A.x-f,A.y-f),new $h(A.x+2*f,A.y+2*f)),D.$62l===Y&&(t=!0)}else if(3===g){var s=S[x+1],T=S[x+2];D=Lq(new $h(H.x,H.y),new $h(s.x,s.y),new $h(T.x,T.y),new $h(A.x-f,A.y-f),new $h(A.x+2*f,A.y+2*f)),D.$62l===Y&&(t=!0)}else if(4===g){var M=S[x+1],w=S[x+2];T=S[x+3],D=Ip(new $h(H.x,H.y),new $h(M.x,M.y),new $h(w.x,w.y),new $h(T.x,T.y),new $h(A.x-f,A.y-f),new $h(A.x+2*f,A.y+2*f)),D.$62l===Y&&(t=!0)}}}if(t)return!0}return v},P._47O=function(P){var d=this,z=d.gv,p=z._editInteractor;p instanceof Q.XEditInteractor||Tb.call(d,P)},P.rectIntersects=function(_){var J=this,s=J._data,G=J.gv,C=G.getZoom(),c=J._55O,P=G._editInteractor;if(P instanceof Q.XEditInteractor&&G.isEditable(s)&&c&&c._43O){var R=c.$15l,e=!1,j=W?5:1,S=_.x+j,N=_.y+j,I={x:S,y:N};if(R&&R.length===s.getPoints().size()||(Cn(J),R=c.$15l),P._shape===s&&P._hoverSegmentIndex>=0){var p=s.getSegments();p&&p.size()||(p=ng(R));var f=G._editInteractor._hoverSegmentIndex,x=p.get(f),D=ql(s,J,f),i=v;if(D!=v&&D>=0){var O=R[D],X=G.getSegmentHoverWidth()/C;if(2===x||1===x){var w=R[D+1];i=gg(new $h(O.x,O.y),new $h(w.x,w.y),new $h(I.x-X,I.y-X),new $h(I.x+2*X,I.y+2*X)),i.$62l===Y&&(e=!0)}else if(3===x){var k=R[D+1],w=R[D+2];i=Lq(new $h(O.x,O.y),new $h(k.x,k.y),new $h(w.x,w.y),new $h(I.x-X,I.y-X),new $h(I.x+2*X,I.y+2*X)),i.$62l===Y&&(e=!0)}else if(4===x){var t=R[D+1],q=R[D+2];w=R[D+3],i=Ip(new $h(O.x,O.y),new $h(t.x,t.y),new $h(q.x,q.y),new $h(w.x,w.y),new $h(I.x-X,I.y-X),new $h(I.x+2*X,I.y+2*X)),i.$62l===Y&&(e=!0)}}}if(e)return!0}return v},P._48O=function(){var g=this,E=g.gv,r=E._editInteractor;r instanceof Q.XEditInteractor?(m._48O.call(g),g._55O._43O&&Cn(g)):Re.call(g)},P._79o=function(){var V=this,Y=V.gv,i=Y.getZoom(),T=Y._editInteractor,U=Ld.call(V);if(U){var S={x:U.x,y:U.y,width:U.width,height:U.height};if(T instanceof Q.XEditInteractor){var H=V._55O,t=Y.getEditPointSize()/i+2,x=0;H&&H._43O&&(x+=t/2,r(S,x))}return S}},m._47O=function(C){var e=this,v=e.gv,u=v._editInteractor;if(u instanceof Q.XEditInteractor);else{var d=e._55O;d&&d._98o&&kg.call(e,C)}},m.getSelectWidth=function(){var U=this,b=U.gv,$=b._editInteractor,R=U._data;return b.isEditable(R)&&$ instanceof Q.XEditInteractor?0:gh.call(U)},m._80o=function(M){var h=this,b=h.gv._editInteractor;if(mj.call(h,M),b&&b._debug){M.save(),M.beginPath(),M.lineWidth=1,M.strokeStyle="green";var $=h._79o();$&&(M.rect($.x,$.y,$.width,$.height),M.stroke()),M.restore()}},P._80o=function(R){var j=this,W=j.gv._editInteractor;if(Rc.call(j,R),W&&W._debug){R.save(),R.beginPath(),R.lineWidth=1,R.strokeStyle="green";var c=j._79o();R.rect(c.x,c.y,c.width,c.height),R.stroke(),R.restore()}},m._48O=function(){var K=this,y=K.gv,d=K._data,C=y._editInteractor,k=K._55O,t=d.p(),g=d.getRotation();if(C instanceof Q.XEditInteractor){if(k._42O){var D=ds(t,d.getWidth(),d.getHeight(),g),A=D[0],f=D[1],V=D[2],P=D[3],O=D[4],L=D[5],a=D[6],j=D[7];k.$45l=[A,O,f,L,P,a,V,j]}}else vf.call(K)},e.getResizeMode=function(){return this.$25l||"normal"},e.setResizeMode=function(C){var S=this.$25l;this.$25l=C,this.fp("resizeMode",S,C)},e.getSnapAngle=function(){return this.$26l||Math.PI/36},e.setSnapAngle=function(e){var M=this.$26l;this.$26l=e,this.fp("snapAngle",M,e)},e.getSnapSpacing=function(){return this.$27l},e.setSnapSpacing=function(r){var H=this.$27l;this.$27l=r,this.fp("snapSpacing",H,r)},e.getPointSnapSpacing=function(){return this._pointSnapSpacing},e.setPointSnapSpacing=function(i){var X=this._pointSnapSpacing;this._pointSnapSpacing=i,this.fp("pointSnapSpacing",X,i)},e.setHelperEditableFunc=function(X){var x=this._helperEditableFunc;this._helperEditableFunc=X,this.fp("helperEditableFunc",x,X)},e.getHelperEditableFunc=function(){return this._helperEditableFunc},e.setLeftTopHelpers=function(k){var P=this._leftTopHelpers;this._leftTopHelpers=k,this.fp("leftTopHelpers",P,k)},e.getLeftTopHelpers=function(){return this._leftTopHelpers},e.setLeftTopHelpersAlign=function(A){var G=this._leftTopHelpersAlign;this._leftTopHelpersAlign=A,this.fp("leftTopHelpersAlign",G,A)},e.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},e.setRightTopHelpers=function(R){var m=this._rightTopHelpers;this._rightTopHelpers=R,this.fp("rightTopHelpers",m,R)},e.getRightTopHelpers=function(){return this._rightTopHelpers},e.setRightTopHelpersAlign=function(z){var o=this._rightTopHelpersAlign;this._rightTopHelpersAlign=z,this.fp("rightTopHelpersAlign",o,z)},e.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},e.setLeftBottomHelpers=function(o){var q=this._leftBottomHelpers;this._leftBottomHelpers=o,this.fp("leftBottomHelpers",q,o)},e.getLeftBottomHelpers=function(){return this._leftBottomHelpers},e.setLeftBottomHelpersAlign=function(w){var d=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=w,this.fp("leftBottomHelpersAlign",d,w)},e.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},e.setRightBottomHelpers=function(m){var p=this._rightBottomHelpers;this._rightBottomHelpers=m,this.fp("rightBottomHelpers",p,m)},e.getRightBottomHelpers=function(){return this._rightBottomHelpers},e.setRightBottomHelpersAlign=function(S){var G=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=S,this.fp("rightBottomHelpersAlign",G,S)},e.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},e.setEdgeHelpers=function(N){var b=this._edgeHelpers;this._edgeHelpers=N,this.fp("edgeHelpers",b,N)},e.getEdgeHelpers=function(){return this._edgeHelpers},e.isHelperEditable=function(B,u){return B instanceof D&&("host"===u||"edge"===u||"elevation"===u||"tall"===u)?!1:B instanceof G&&("source"===u||"target"===u)?!1:"pointElevation"===u?this._helperEditableFunc?this._helperEditableFunc(B,u):!1:this._helperEditableFunc?this._helperEditableFunc(B,u):!0},e.getEditHelperSize=function(){return this._editHelperSize||(W?28:16)},e.setEditHelperSize=function(s){var H=this._editHelperSize;this._editHelperSize=s,this.fp("editHelperSize",H,s)},e.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},e.setEditRectBorderColor=function(v){var u=this.$28l;this.$28l=v,this.fp("editRectBorderColor",u,v)},e.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},e.setNodeBorderColor=function(e){var R=this.$29l;this.$29l=e,this.fp("nodeBorderColor",R,e)},e.getEditRectBorderStyle=function(){return this.$30l||"dashed"},e.setEditRectBorderStyle=function($){var C=this.$30l;this.$30l=$,this.fp("editRectBorderStyle",C,$)},e.getControlPointBackground=function(){return this.$31l||"#ff0"},e.setControlPointBackground=function(k){var s=this.$31l;this.$31l=k,this.fp("controlPointBackground",s,k)},e.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},e.setControlPointBorderColor=function($){var k=this.$32l;this.$32l=$,this.fp("controlPointBorderColor",k,$)},e.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},e.setJoinPointBackground=function(j){var A=this.$33l;this.$33l=j,this.fp("joinPointBackground",A,j)},e.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},e.setJoinPointBorderColor=function(w){var D=this.$34l;this.$34l=w,this.fp("joinPointBorderColor",D,w)},e.getDirectionLineColor=function(){return this.$35l||"#888"},e.setDirectionLineColor=function(z){var K=this.$35l;this.$35l=z,this.fp("directionLineColor",K,z)},e.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},e.setSegmentHoverColor=function(B){var f=this.$36l;this.$36l=B,this.fp("segmentHoverColor",f,B)},e.getSegmentHoverWidth=function(){return this.$22l||(W?16:8)},e.setSegmentHoverWidth=function(O){var z=this.$22l;this.$22l=O,this.fp("segmentHoverWidth",z,O)},e.getSnapPointBorderColor=function(){return this.$38l||"#f00"},e.setSnapPointBorderColor=function(f){var S=this.$38l;this.$38l=f,this.fp("snapPointBorderColor",S,f)},e.getEditRectPadding=function(){return this.$39l!=v?this.$39l:6},e.setEditRectPadding=function(j){var N=this.$39l;this.$39l=j,this.fp("editRectPading",N,j)},e.isRectEditable=function(q){var P=this,m=P._editInteractor;return m instanceof Q.XEditInteractor?P._rectEditableFunc?P._rectEditableFunc(q):!0:Oh.call(P,q)},e.isPointEditable=function(_){var G=this,k=G._editInteractor;return k instanceof Q.XEditInteractor?G._pointEditableFunc?G._pointEditableFunc(_):!0:Eh.call(G,_)},e.validateImpl=function(){var k=this,r=k.$14l,C=k._editInteractor;if(r){var $=k.getWidth(),A=k.getHeight();($!==r.clientWidth||A!==r.clientHeight)&&(C&&(C._68I=1),d.setCanvas(r,$,A),k._32I=1)}iq.call(this)},e.isEditable=function(u){var k=cn.call(this,u),d=this._editInteractor;if(d instanceof Q.XEditInteractor&&u instanceof D){if(!u.s("2d.editable"))return!1;var c=this.getEditableFunc();k=c?c(u):!0}return k},e._42=function(z,O){var x=this,w=x._editInteractor;Zn.call(x,z,O),w instanceof Q.XEditInteractor&&w._68I&&w._42()},e.isSnapPoint=function(){return!0};var Bs=function(J){arguments.length>0&&this.$58l(J)},oo=Bs.prototype;oo.$58l=function(Z){this.$62l=Z,this.points=new Array},oo.$56l=function(T){this.points.push(T)},oo.$57l=function(n){this.points=this.points.concat(n)};var $h=function(Z,G){arguments.length>0&&this.$58l(Z,G)},nn=$h.prototype;nn.$58l=function(A,F){this.x=A,this.y=F},nn.add=function(Z){return new $h(this.x+Z.x,this.y+Z.y)},nn.addEquals=function(B){return this.x+=B.x,this.y+=B.y,this},nn.$55l=function(m){return new $h(this.x*m,this.y*m)},nn.eq=function(f){return this.x==f.x&&this.y==f.y},nn.lt=function(f){return this.x<f.x&&this.y<f.y},nn.lte=function(p){return this.x<=p.x&&this.y<=p.y},nn.gt=function(_){return this.x>_.x&&this.y>_.y},nn.gte=function(L){return this.x>=L.x&&this.y>=L.y},nn.lerp=function(f,w){return new $h(this.x+(f.x-this.x)*w,this.y+(f.y-this.y)*w)},nn.distanceFrom=function(Q){var d=this.x-Q.x,T=this.y-Q.y;return s(d*d+T*T)},nn.min=function(T){return new $h(x(this.x,T.x),x(this.y,T.y))},nn.max=function(D){return new $h(K(this.x,D.x),K(this.y,D.y))},nn.toString=function(){return this.x+","+this.y};var vs=function(){this.$58l(arguments)},Mp=vs.prototype;vs.TO=1e-6,vs.AC=6,Mp.$58l=function(U){this.co=new Array;for(var g=U.length-1;g>=0;g--)this.co.push(U[g])},Mp.$55l=function(j){for(var p=new vs,z=0;z<=this.$50l()+j.$50l();z++)p.co.push(0);for(var z=0;z<=this.$50l();z++)for(var E=0;E<=j.$50l();E++)p.co[z+E]+=this.co[z]*j.co[E];return p},Mp.$59l=function(){for(var X=this.$50l();X>=0&&z(this.co[X])<=vs.TO;X--)this.co.pop()},Mp.$50l=function(){return this.co.length-1},Mp.$51l=function(){var M;switch(this.$59l(),this.$50l()){case 0:M=new Array;break;case 1:M=this.$52l();break;case 2:M=this.$53l();break;case 3:M=this.$54l();break;case 4:M=this.$63l();break;default:M=new Array}return M},Mp.$52l=function(){var k=new Array,h=this.co[1];return 0!=h&&k.push(-this.co[0]/h),k},Mp.$53l=function(){var A=new Array;if(2==this.$50l()){var j=this.co[2],Y=this.co[1]/j,D=this.co[0]/j,C=Y*Y-4*D;if(C>0){var o=s(C);A.push(.5*(-Y+o)),A.push(.5*(-Y-o))}else 0==C&&A.push(.5*-Y)}return A},Mp.$63l=function(){var p=new Array;if(4==this.$50l()){var M=this.co[4],k=this.co[3]/M,A=this.co[2]/M,Y=this.co[1]/M,Z=this.co[0]/M,i=new vs(1,-A,k*Y-4*Z,-k*k*Z+4*A*Z-Y*Y).$54l(),N=i[0],L=k*k/4-A+N;if(z(L)<=vs.TO&&(L=0),L>0){var I=s(L),W=3*k*k/4-I*I-2*A,d=(4*k*A-8*Y-k*k*k)/(4*I),c=W+d,X=W-d;if(z(c)<=vs.TO&&(c=0),z(X)<=vs.TO&&(X=0),c>=0){var l=s(c);p.push(-k/4+(I+l)/2),p.push(-k/4+(I-l)/2)}if(X>=0){var l=s(X);p.push(-k/4+(l-I)/2),p.push(-k/4-(l+I)/2)}}else if(0>L);else{var d=N*N-4*Z;if(d>=-vs.TO){if(0>d&&(d=0),d=2*s(d),W=3*k*k/4-2*A,W+d>=vs.TO){var b=s(W+d);p.push(-k/4+b/2),p.push(-k/4-b/2)}if(W-d>=vs.TO){var b=s(W-d);p.push(-k/4+b/2),p.push(-k/4-b/2)}}}}return p},Mp.$54l=function(){var C=new Array;if(3==this.$50l()){var H=this.co[3],j=this.co[2]/H,X=this.co[1]/H,u=this.co[0]/H,I=(3*X-j*j)/3,p=(2*j*j*j-9*X*j+27*u)/27,T=j/3,V=p*p/4+I*I*I/27,k=p/2;if(z(V)<=vs.TO&&(V=0),V>0){var Z,G,U=s(V);Z=-k+U,G=Z>=0?f(Z,1/3):-f(-Z,1/3),Z=-k-U,Z>=0?G+=f(Z,1/3):G-=f(-Z,1/3),C.push(G-T)}else if(0>V){var o=s(-I/3),M=A(s(-V),-k)/3,r=q(M),R=N(M),E=s(3);C.push(2*o*r-T),C.push(-o*(r+E*R)-T),C.push(-o*(r-E*R)-T)}else{var Z;Z=k>=0?-f(k,1/3):f(-k,1/3),C.push(2*Z-T),C.push(-Z-T)}}return C};var gn=function(J,M){arguments.length>0&&this.$58l(J,M)},Nc=gn.prototype;Nc.$58l=function(g,e){this.x=g,this.y=e},Nc.length=function(){return s(this.x*this.x+this.y*this.y)},Nc.$60l=function(n){return this.x*n.x+this.y*n.y};var hh=function(t,i,J,Q){var U,R=(Q.x-J.x)*(t.y-J.y)-(Q.y-J.y)*(t.x-J.x),e=(i.x-t.x)*(t.y-J.y)-(i.y-t.y)*(t.x-J.x),n=(Q.y-J.y)*(i.x-t.x)-(Q.x-J.x)*(i.y-t.y);if(0!=n){var x=R/n,p=e/n;x>=0&&1>=x&&p>=0&&1>=p?(U=new Bs(Y),U.points.push(new $h(t.x+x*(i.x-t.x),t.y+x*(i.y-t.y)))):U=new Bs(o)}else U=0==R||0==e?new Bs("C"):new Bs("P");return U},re=function(X,T,_,N,G){var s,q,A,O,x,c,d,w=N.min(G),L=N.max(G),I=new Bs(o);s=T.$55l(-2),A=X.add(s.add(_)),s=X.$55l(-2),q=T.$55l(2),O=s.add(q),x=new $h(X.x,X.y),d=new gn(N.y-G.y,G.x-N.x),c=N.x*G.y-G.x*N.y;for(var M=new vs(d.$60l(A),d.$60l(O),d.$60l(x)+c).$51l(),z=0;z<M.length;z++){var K=M[z];if(K>=0&&1>=K){var h=X.lerp(T,K),P=T.lerp(_,K),e=h.lerp(P,K);N.x==G.x?w.y<=e.y&&e.y<=L.y&&(I.$62l=Y,I.$56l(e)):N.y==G.y?w.x<=e.x&&e.x<=L.x&&(I.$62l=Y,I.$56l(e)):e.gte(w)&&e.lte(L)&&(I.$62l=Y,I.$56l(e))}}return I},Lq=function(m,U,F,M,Q){var y=M.min(Q),K=M.max(Q),w=new $h(K.x,y.y),$=new $h(y.x,K.y),v=re(m,U,F,y,w),J=re(m,U,F,w,K),O=re(m,U,F,K,$),c=re(m,U,F,$,y),E=new Bs(o);return E.$57l(v.points),E.$57l(J.points),E.$57l(O.points),E.$57l(c.points),E.points.length>0&&(E.$62l=Y),E},Zo=function(Z,n,O,f,x,p){var w,s,h,_,t,C,D,A,W,v,V=x.min(p),L=x.max(p),d=new Bs(o);w=Z.$55l(-1),s=n.$55l(3),h=O.$55l(-3),_=w.add(s.add(h.add(f))),t=new gn(_.x,_.y),w=Z.$55l(3),s=n.$55l(-6),h=O.$55l(3),_=w.add(s.add(h)),C=new gn(_.x,_.y),w=Z.$55l(-3),s=n.$55l(3),h=w.add(s),D=new gn(h.x,h.y),A=new gn(Z.x,Z.y),v=new gn(x.y-p.y,p.x-x.x),W=x.x*p.y-p.x*x.y;for(var e=new vs(v.$60l(t),v.$60l(C),v.$60l(D),v.$60l(A)+W).$51l(),M=0;M<e.length;M++){var m=e[M];if(m>=0&&1>=m){var R=Z.lerp(n,m),i=n.lerp(O,m),G=O.lerp(f,m),E=R.lerp(i,m),F=i.lerp(G,m),B=E.lerp(F,m);x.x==p.x?V.y<=B.y&&B.y<=L.y&&(d.$62l=Y,d.$56l(B)):x.y==p.y?V.x<=B.x&&B.x<=L.x&&(d.$62l=Y,d.$56l(B)):B.gte(V)&&B.lte(L)&&(d.$62l=Y,d.$56l(B))}}return d},Ip=function(l,v,B,T,q,j){var m=q.min(j),n=q.max(j),M=new $h(n.x,m.y),i=new $h(m.x,n.y),$=Zo(l,v,B,T,m,M),A=Zo(l,v,B,T,M,n),g=Zo(l,v,B,T,n,i),a=Zo(l,v,B,T,i,m),t=new Bs(o);return t.$57l($.points),t.$57l(A.points),t.$57l(g.points),t.$57l(a.points),t.points.length>0&&(t.$62l=Y),t},gg=function(P,E,u,G){var A=u.min(G),D=u.max(G),R=new $h(D.x,A.y),g=new $h(A.x,D.y),$=hh(A,R,P,E),U=hh(R,D,P,E),O=hh(D,g,P,E),t=hh(g,A,P,E),p=new Bs(o);return p.$57l($.points),p.$57l(U.points),p.$57l(O.points),p.$57l(t.points),p.points.length>0&&(p.$62l=Y),p},Jh=Q.XEditInteractor=function(N){var j=this,P=j._view=document.createElement("canvas");P.className="editCanvas",P.style.position="absolute",Jh.superClass.constructor.call(j,N)};w.def(Jh,Q.Interactor,{ms_edit:1,setUp:function(){var L=this,o=L.gv,H=o.getView(),b=L._view;Jh.superClass.setUp.call(L),o.setEditInteractor(L),o.$14l=b,o._79O?H.insertBefore(b,o._79O):H.appendChild(b);var R=L.$49l=L.$11l.bind(L);o.dm().md(R),o.sm().ms(R),o.mp(R)},tearDown:function(){var Y=this,O=Y.gv,I=O.getView(),d=Y.$49l;Jh.superClass.tearDown.call(Y),O.setEditInteractor(v),O.$14l=v,I.removeChild(Y._view),O.dm().umd(d),O.sm().ums(d),O.ump(d)},clear:function(){var H=this,O=H.gv;delete H._hoverSegmentIndex,delete H._edge,delete H._shape,delete O._editing,delete H.$10l,delete H.$13l,delete H.$9l,delete H._removePointIndex,delete H._lp,H.$12l="",delete H.$40l,delete H.$67l,delete H.$72l,delete H.$73l,delete H.$75l,delete H.$1l,delete H.$3l,delete H.$2l,delete H.$92l,delete H.$93l,delete H.$94l,H.clearDragging()},handle_keydown:function(h){this.$48l!==h.shiftKey&&(this.$48l=h.shiftKey,this.handle_mousemove(h,O,!0))},handle_keyup:function(l){this.$48l!==l.shiftKey&&(this.$48l=l.shiftKey,this.handle_mousemove(l,O,!0))},handle_touchstart:function(i){this.handle_mousemove(i),this.handle_mousedown(i)},handle_mousedown:function(i){F(i);var q=this,f=q.$13l,l=q.gv,c=l.dm(),V=l.sm(),C=l.getZoom(),U=l.lp(i),d=w.isDoubleClick(i),M=w.isLeftButton(i),Q=q.$7l,S=q._shape,k=q._hoverSegmentIndex,x=q._edge,r=q.$87l,Z=q.$88l,Y=function(){q._68I||r===q.$87l&&Z===q.$88l||q.$43l()};if(7!==q.$67l&&(delete q.$87l,delete q.$88l),M&&(S||x)&&k>=0&&d&&(S&&V.contains(S)||x&&V.contains(x))){var b=ss.call(q,S||x,k,U);return q.addShapePoint(S||x,k,b),n(function(){q.handle_mousemove(i)},40),void 0}if(M&&(S||x)&&q._removePointIndex>=0&&d)return q.removeShapePoint(),q.$5l=1,n(function(){q.handle_mousemove(i)},40),void 0;if(!M||!l._editing)return Y(),void 0;if(S&&f>=0){var O=S.getPoints().get(f),y=S.p(),$=jp(y,O.x-y.x,O.y-y.y,-Q+S.getRotation());L=jp(y,U.x-y.x,U.y-y.y,-Q),q.$24l={x:L.x-$.x,y:L.y-$.y},q.startDragging(i),c.beginTransaction(),q.fi({kind:"beginEditPoint",event:i,data:S,index:f}),q.$88l=f,q.$87l=S}else if(q.$10l){var j=l.sm().getSelection(),p=q.$6l,e=q.$1l={},W=q.$3l={},m=q.$16l[I[q.$10l]],A={x:p.x,y:p.y},s={x:p.x+p.width/2,y:p.y+p.height/2};q.$24l={x:U.x-m.x/C,y:U.y-m.y/C},q.$2l=B(q.$8l),q.$4l=B(p),j.each(function(_){if(_ instanceof G){var M=_.p(),b=_.getWidth(),L=_.getHeight(),C=jp(s,M.x-s.x,M.y-s.y,-Q);e[_.getId()]={x:M.x-b/2,y:M.y-L/2,width:b,height:L},W[_.getId()]={x:(C.x-A.x)/p.width,y:(C.y-A.y)/p.height}}}),q.startDragging(i),c.beginTransaction(),q.fi({kind:"beginEditRect",event:i,direction:q.$10l})}else if(x&&f>=0){var K=Xq(l.getDataUI(x),x.s("edge.points")),O=K.get(f);q.$24l={x:U.x-O.x,y:U.y-O.y},q.startDragging(i),c.beginTransaction(),q.fi({kind:"beginEditPoint",event:i,data:x,index:f}),q.$88l=f,q.$87l=x}else if(q.$40l){var p=q.$6l,s={x:p.x+p.width/2,y:p.y+p.height/2},E=B(q.$23l);E.x/=C,E.y/=C;var o=jp(s,E.x-s.x,E.y-s.y,-Q),L=jp(s,U.x-s.x,U.y-s.y,-Q);q.$24l={x:L.x-o.x,y:L.y-o.y},q.startDragging(i),c.beginTransaction(),q.fi({kind:"beginEditRotation",event:i,data:q._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(q.$67l)>=0){var t=q.$67l;(7===t||8===t||9===t)&&c.beginTransaction(),q.startDragging(i)}else if(q.$71l&&d&&q.$79l(q.$71l,U)){var v=V.toSelection();c.beginTransaction(),v.each(function(S){c.remove(S)}),c.endTransaction()}Y()},$11l:function(){var k=this,S=k.gv;S._editing&&(k.$13l==v||k._shape==v&&k._edge==v)&&(k.$73l==v||1!==k.$67l&&5!==k.$67l&&6!==k.$67l)||(k.$5l=1),k._68I=1},$46l:function(b){var u=this,S=u.gv,q=S.lp(b),e=[];return _g(S,function(o){var Q=S.getDataUI(o);if(Q){var U=Q._79o();i(U,q)&&e.push(o)}}),e},$47l:function(n){var o=this,k=o.$13l,L=o.gv.dm();o.$10l?(o.fi({kind:"endEditRect",event:n,direction:o.$10l}),L.endTransaction()):o._shape&&k>=0?(o.fi({kind:"endEditPoint",event:n,data:o._shape,index:k}),L.endTransaction()):o._edge&&k>=0?(o.fi({kind:"endEditPoint",event:n,data:o._edge,index:k}),L.endTransaction()):o.$23l&&o.$40l&&(o.fi({kind:"endEditRotation",event:n}),L.endTransaction())},handleWindowTouchEnd:function(Y){this.handleWindowMouseUp(Y)},handleWindowMouseUp:function(Z){var r=this,i=r.gv,l=i.dm(),y=r._shape,A=r._edge,z=r.$13l,d=r.$40l,k=r.$9l,n=r.$10l,_=r.$67l;if((y||A)&&z>=0&&k>=0){var C,h;if(y){var e=y.p(),P=y.getRotation();C=y.getPoints(),h=C.get(k),$f(y,e,P,z,h,!1)}else if(C=Xq(i.getDataUI(A),A.s("edge.points"),!0),h=C.get(k),0===z){var N=C.get(0);A.s("edge.source.offset.x",h.x-N.x),A.s("edge.source.offset.y",h.y-N.y)}else if(z===C.size()-1){var j=C.get(C.size()-1);A.s("edge.target.offset.x",h.x-j.x),A.s("edge.target.offset.y",h.y-j.y)}else"points"===A.s("edge.type")&&(C.set(z,h),A.s("edge.points",Sq(C)))}r.$47l(Z);var J=r.$73l;1===_?(l.beginTransaction(),J?i.sm().each(function(v){if(v.setHost&&i.isHelperEditable(v,"host")){v.setHost(J);
var V=r.$75l,I=r.$74l;V&&(v.s("attach.row.index",V.rowIndex),v.s("attach.column.index",V.columnIndex)),I&&(v.s("attach.index",I.attachIndex),v.s("attach.offset",I.attachOffset),v.s("attach.offset.relative",!1),v.s("attach.offset.opposite",!1))}}):i.sm().each(function(K){K.setHost&&i.isHelperEditable(K,"host")&&(K.setHost(v),K.s("attach.row.index",O),K.s("attach.column.index",O),K.s("attach.index",O),K.s("attach.offset",O),K.s("attach.offset.relative",!1),K.s("attach.offset.opposite",!1))}),l.endTransaction()):2===_?(l.beginTransaction(),J?i.sm().each(function(H){H.setParent&&i.isHelperEditable(H,"parent")&&H.setParent(J)}):i.sm().each(function(q){q.setParent&&i.isHelperEditable(q,"parent")&&q.setParent(v)}),l.endTransaction()):3===_?J&&(l.beginTransaction(),i.sm().each(function(H){if(i.isHelperEditable(H,"edge")&&H instanceof G&&J instanceof G){var t=new $.Edge;l.add(t),t.setSource(H),t.setTarget(J),r.onEdgeCreated&&r.onEdgeCreated(Z,t)}}),l.endTransaction()):5===_||6===_?J&&(l.beginTransaction(),i.sm().each(function(Z){Z instanceof D&&J instanceof G&&(5===_&&i.isHelperEditable(Z,"source")?Z.setSource(J):6===_&&i.isHelperEditable(Z,"source")&&Z.setTarget(J))}),l.endTransaction()):(7===_||8===_||9===_)&&l.endTransaction(),(n||d)&&r.$43l(!0),W?(r.clear(),delete r.$64l,r._68I||r.$43l()):(r.handle_mousemove(Z,!0),_&&!r._68I&&r.$43l())},handleWindowTouchMove:function(W){this.handleWindowMouseMove(W)},handleWindowMouseMove:function(D){this._78I(D)},handle_mousemove:function(j,h,l){if(!this._pause){if(!l){var D=W?Po(j):j;this.$61l={clientX:D.clientX,clientY:D.clientY}}if(h===!0||!g()){var e=this,o=e.gv,Z=!1,P=v;e.clear(),o.sm().size()>0&&(P=o.lp(l?e.$61l:j),Z=e._79I(j,P)),Z&&(o._editing=1),e.$12l!==e.$65l&&(e.$65l=e.$12l,e.setCursor(e.$12l)),e.$40l!==e.$64l&&(e.$64l=e.$40l,e._68I||e.$43l()),e._hoverSegmentIndex!==e.$66l&&(e.$66l=e._hoverSegmentIndex,e._68I||e.$43l())}}},_78I:function(Z){this.autoScroll(Z);var U=this,k=U.gv,$=k.lp(Z),P=k.getZoom(),g=U.$13l;if((U._shape||U._edge)&&g>=0){var f,j,R,d=U._shape,u=U._edge,e=U.$24l,h=k.getPointSnapSpacing(),r=function(x,O){return h==v||isNaN(h)?{x:x,y:O}:{x:_(x/h)*h,y:_(O/h)*h}};if(d){f=d.getPoints();var S=d.p(),I=d.getRotation(),y=0;j=jp(S,$.x-S.x,$.y-S.y,-I),$f(d,S,I,g,$,!0,e,r),U.fi({kind:"betweenEditPoint",event:Z,data:d,index:g})}else if(u){f=Xq(k.getDataUI(u),u.s("edge.points"),!0),$.x-=e.x,$.y-=e.y,j=$;var L,C,F=u.s("edge.offset"),b=f.size(),o=b>2;if(0===g){var m=f.get(0);F&&(m=Hf(m,f.get(1),-F,o),$=Hf($,f.get(1),-F,o)),L=$.x-m.x,C=$.y-m.y,R=r(L,C),u.s("edge.source.offset.x",R.x),u.s("edge.source.offset.y",R.y)}else if(g===b-1){var O=f.get(b-1);F&&(O=Hf(O,f.get(b-2),-F,o),$=Hf($,f.get(b-2),-F,o)),L=$.x-O.x,C=$.y-O.y,R=r(L,C),u.s("edge.target.offset.x",R.x),u.s("edge.target.offset.y",R.y)}else"points"===u.s("edge.type")&&(R=r($.x,$.y),R.e=f.get(g).e,f.set(g,R),u.s("edge.points",Sq(f)));U.fi({kind:"betweenEditPoint",event:Z,data:u,index:g})}if(delete U.$9l,k.isSnapPoint(d)||k.isSnapPoint(u))for(y=0;y<f.size();y++)if(y!==g){var N=f.get(y);if(E(N,j)<k.getEditPointSize()/P){U.$9l=y;break}}}else if(U.$10l){var e=U.$24l;$.x-=e.x,$.y-=e.y;var p=k.sm().getSelection(),q=U.$1l,i=U.$7l,W=U.$10l,H=U.$4l,V=U.$2l,J=k.getEditRectPadding()/P,Y=2*J,c=k.getSnapSpacing(),B=c!=v&&!isNaN(c),K=Qb(V,$,W,i,2*J,k.getResizeMode(),B,!0),a=U.$6l;if(B){var X=K.width-Y,Q=K.height-Y,x=_(X/c)*c,Dq=_(Q/c)*c,kb=x-X,bo=Dq-Q;("west"===W||"northwest"===W||"southwest"===W)&&(kb=-kb),("north"===W||"northwest"===W||"northeast"===W)&&(bo=-bo),K=Qb(V,$,W,i,2*J,k.getResizeMode(),B,!1,kb,bo)}U.$8l=K,a.x=K.x+J,a.y=K.y+J,a.width=K.width-Y,a.height=K.height-Y;var Ak=K.x+K.width/2,uq=K.y+K.height/2,Yp=a.x,yp=a.y,he=a.width/H.width,eh=a.height/H.height;p.each(function(O){if(O instanceof G&&k.isEditable(O)&&k.isRectEditable(O)){var b=q[O.getId()],t=U.$3l[O.getId()],V={x:b.x+b.width/2,y:b.y+b.height/2},_=0,Y=0,S=W,h=180*z(i-O.getRotation())/M;"northeast"===W?h>=315||45>h?(_=b.width*he+b.x,Y=b.height*(1-eh)+b.y,S="northeast"):h>=45&&135>h?(_=b.width*(1-eh)+b.x,Y=b.height*(1-he)+b.y,S="northwest"):h>=135&&225>h?(_=b.width*(1-he)+b.x,Y=b.height*eh+b.y,S="southwest"):(_=b.width*eh+b.x,Y=b.height*he+b.y,S="southeast"):"north"===W?h>=315||45>h?(Y=b.height*(1-eh)+b.y,S="north"):h>=45&&135>h?(_=b.width*(1-eh)+b.x,S="west"):h>=135&&225>h?(Y=b.height*eh+b.y,S="south"):(_=b.width*eh+b.x,S="east"):"northwest"===W?h>=315||45>h?(_=b.width*(1-he)+b.x,Y=b.height*(1-eh)+b.y,S="northwest"):h>=45&&135>h?(_=b.width*(1-eh)+b.x,Y=b.height*he+b.y,S="southwest"):h>=135&&225>h?(_=b.width*he+b.x,Y=b.height*eh+b.y,S="southeast"):(_=b.width*eh+b.x,Y=b.height*(1-he)+b.y,S="northeast"):"west"===W?h>=315||45>h?(_=b.width*(1-he)+b.x,S="west"):h>=45&&135>h?(Y=b.height*he+b.y,S="south"):h>=135&&225>h?(_=b.width*he+b.x,S="east"):(Y=b.height*(1-he)+b.y,S="north"):"southwest"===W?h>=315||45>h?(_=b.width*(1-he)+b.x,Y=b.height*eh+b.y,S="southwest"):h>=45&&135>h?(_=b.width*eh+b.x,Y=b.height*he+b.y,S="southeast"):h>=135&&225>h?(_=b.width*he+b.x,Y=b.height*(1-eh)+b.y,S="northeast"):(_=b.width*(1-eh)+b.x,Y=b.height*(1-he)+b.y,S="northwest"):"east"===W?h>=315||45>h?(_=b.width*he+b.x,S="east"):h>=45&&135>h?(Y=b.height*(1-he)+b.y,S="north"):h>=135&&225>h?(_=b.width*(1-he)+b.x,S="west"):(Y=b.height*he+b.y,S="south"):"south"===W?h>=315||45>h?(Y=b.height*eh+b.y,S="south"):h>=45&&135>h?(_=b.width*eh+b.x,S="east"):h>=135&&225>h?(Y=b.height*(1-eh)+b.y,S="north"):(_=b.width*(1-eh)+b.x,S="west"):"southeast"===W&&(h>=315||45>h?(_=b.width*he+b.x,Y=b.height*eh+b.y,S="southeast"):h>=45&&135>h?(_=b.width*eh+b.x,Y=b.height*(1-he)+b.y,S="northeast"):h>=135&&225>h?(_=b.width*(1-he)+b.x,Y=b.height*(1-eh)+b.y,S="northwest"):(_=b.width*(1-eh)+b.x,Y=b.height*he+b.y,S="southwest"));var y=jp(V,_-V.x,Y-V.y,O.getRotation());sc(O,b,S,{x:y.x,y:y.y});var u=Yp+a.width*t.x,x=yp+a.height*t.y,N={x:u,y:x};N=jp({x:Ak,y:uq},N.x-Ak,N.y-uq,i),O.p(N.x,N.y)}}),U.fi({kind:"betweenEditRect",event:Z,direction:W})}else if(U.$23l&&U.$40l){var Fd=U.$8l,Zm=Fd.width,Rh=Fd.height,S={x:Fd.x+Zm/2,y:Fd.y+Rh/2},e=U.$24l,ti=U.$23l,Qn=ti.x/P-S.x,Fm=ti.y/P-S.y,_j=s(Qn*Qn+Fm*Fm),Pd=Math.asin(e.x/_j),Ir=k.sm().getSelection(),Xn=l+A($.y-S.y,$.x-S.x)-Pd,tg=k.getSnapAngle(),Xn=_(Xn/tg)*tg;0>Xn&&(Xn+=t);var gi=Xn-U.$7l,ul=[S.x,0,S.y];Ir.each(function(p){if(k.isEditable(p)&&k.isRotationEditable(p)&&k.isVisible(p)){var $=Fh(p.p3(),ul),y=Rm();Vk(y,-gi),p.setRotation(p.getRotation()+gi),Vl($,y),p.p3(ul[0]+$[0],ul[1]+$[1],ul[2]+$[2])}}),U.$7l=Xn,U.fi({kind:"betweenEditRotation",event:Z})}else if([1,2,3,5,6].indexOf(U.$67l)>=0)U.$72l=Z,U.$78l||(U.$78l=1,n(function(){w.isDragging()&&U.$43l(),delete U.$78l},12));else if(7===U.$67l){if(U.$87l instanceof T){var d=U.$87l,Rc=U.$88l,jl=w.clone(d.getPoints().get(Rc)),qr=$.y-jl.y;jl.e||(jl.e=0),U.$92l||(U.$92l=jl.e),jl.e=U.$92l-qr,d.setPoint(Rc,jl)}else if(U.$87l instanceof D){var u=U.$87l,Rc=U.$88l,f=Xq(k.getDataUI(u),u.s("edge.points")),jl=f.get(Rc),qr=$.y-jl.y;jl.e||(jl.e=0),U.$92l||(U.$92l=jl.e),jl.e=U.$92l-qr,f.set(Rc,jl),u.s("edge.points",Sq(f))}}else if(8===U.$67l){var Ir=k.sm().getSelection(),Vm=U.$93l;Vm||(Vm=U.$93l={}),Ir.each(function(r){if(r.p3){var j=r.p3(),B=Vm[r.getId()];B==v&&(B=Vm[r.getId()]=j[1]),r.p3([j[0],B-($.y-U.$90l.y/P),j[2]])}})}else if(9===U.$67l){var Ir=k.sm().getSelection(),Fb=U.$94l;Fb||(Fb=U.$94l={}),Ir.each(function(N){if(N.s3){var I=N.s3(),G=Fb[N.getId()];G==v&&(G=Fb[N.getId()]=I[1]);var J=G-($.y-U.$91l.y/P);0>J&&(J=.01),N.s3([I[0],J,I[2]])}})}},$79l:function(A,t){var o=this,r=o.gv,d=r.getZoom(),n=r.getEditHelperSize(),b=A.x/d,z=A.y/d,j=n/d,x=j/2;return i({x:b-x,y:z-x,width:j,height:j},t)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(A,B){for(var R=this,j=R.gv,v=j.getZoom(),W=j.getEditPointSize(),G=W/v,$=G/2,x=R.$46l(A),p=0;p<x.length;p++){var F,K,J=x[p],S=j.getDataUI(J);if(S&&S._55O){var d=S._55O;if(d._43O&&J instanceof D){if(F=J.s("edge.points"),F=Xq(S,F),K=J.s("edge.segments"),K&&K.size()||(K=ng(F)),R.$42l(J,B,F._as,K,"edge"))return!0;if("points"===J.s("edge.type")&&R.$41l(J,B,F._as,K,"edge"))return}if(d._43O&&J instanceof T&&d.$15l&&d.$15l.length===J.getPoints().size()){if(F=d.$15l,K=J.getSegments(),K&&K.size()||(K=ng(F)),R.$42l(J,B,F,K,"shape"))return!0;if(R.$41l(J,B,F,K,"shape"))return}}}if(R.$16l){var F,r=R.$16l,N=r[3].x-r[7].x,a=r[3].y-r[7].y,w=s(N*N+a*a),O=r[1].x-r[5].x,u=r[1].y-r[5].y,m=s(O*O+u*u),M={x:B.x*v,y:B.y*v};if(R._80I(M,0,r[0],"northwest",w,m)||R._80I(M,1,r[1],"north",w,m)||R._80I(M,2,r[2],"northeast",w,m)||R._80I(M,7,r[7],"west",w,m)||R._80I(M,3,r[3],"east",w,m)||R._80I(M,6,r[6],"southwest",w,m)||R._80I(M,5,r[5],"south",w,m)||R._80I(M,4,r[4],"southeast",w,m))return!0}if(R.$23l){var Z=R.$23l,Y=Z.x/v,C=Z.y/v;if(i({x:Y-$,y:C-$,width:G,height:G},B))return R.$40l=1,R.$12l=R.getHelperCursor("rotation")||"crosshair",!0}return R.$68l&&R.$79l(R.$68l,B)?(R.$67l=1,R.$12l=R.getHelperCursor("host")||"crosshair",!0):R.$69l&&R.$79l(R.$69l,B)?(R.$67l=2,R.$12l=R.getHelperCursor("parent")||"crosshair",!0):R.$70l&&R.$79l(R.$70l,B)?(R.$67l=3,R.$12l=R.getHelperCursor("edge")||"crosshair",!0):R.$71l&&R.$79l(R.$71l,B)?(R.$67l=4,R.$12l=R.getHelperCursor("remove")||"crosshair",!0):R.$82l&&R.$79l(R.$82l,B)?(R.$67l=5,R.$12l=R.getHelperCursor("source")||"crosshair",!0):R.$83l&&R.$79l(R.$83l,B)?(R.$67l=6,R.$12l=R.getHelperCursor("target")||"crosshair",!0):R._pointElevationHelperPoint&&R.$79l(R._pointElevationHelperPoint,B)?(R.$67l=7,R.$12l=R.getHelperCursor("pointElevation")||"crosshair",!0):R.$90l&&R.$79l(R.$90l,B)?(R.$67l=8,R.$12l=R.getHelperCursor("elevation")||"crosshair",!0):R.$91l&&R.$79l(R.$91l,B)?(R.$67l=9,R.$12l=R.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(Q,O,q,p,u,Y){var x=this,L=x.gv,J=L.getEditPointSize(),C=J/2,B=L.sm(),I=L.isDirectionEditable;if(I&&1===B.size()){var H=B.ld();if(I=I.bind(L),H instanceof G){if(!I(H,p))return!1;if("east"===p){if(I(H,"northeast")&&I(H,"southeast")&&2*J>=Y)return!1}else if("west"===p){if(I(H,"northwest")&&I(H,"southwest")&&2*J>=Y)return!1}else if("north"===p){if(I(H,"northwest")&&I(H,"northeast")&&2*J>=u)return!1}else if("south"===p&&I(H,"southwest")&&I(H,"southeast")&&2*J>=u)return!1}}else{if(2*J>=u&&("north"===p||"south"===p))return!1;if(2*J>=Y&&("east"===p||"west"===p))return!1}if(i({x:q.x-C,y:q.y-C,width:J,height:J},Q)){if(x.$10l!==p){var j=180*x.$7l/M,W="";j>=337.5||22.5>j?W="north":j>=22.5&&67.5>j?W="northeast":j>=67.5&&112.5>j?W="east":j>=112.5&&157.5>j?W="southeast":j>=157.5&&202.5>j?W="south":j>=202.5&&247.5>j?W="southwest":j>=247.5&&292.5>j?W="west":j>=292.5&&337.5>j&&(W="northwest");var E=vd.indexOf(W),W=vd[O-(1-E)+8];switch(W){case"northwest":x.$12l="nwse-resize";break;case"northeast":x.$12l="nesw-resize";break;case"southwest":x.$12l="nesw-resize";break;case"southeast":x.$12l="nwse-resize";break;case"north":x.$12l="ns-resize";break;case"east":x.$12l="ew-resize";break;case"south":x.$12l="ns-resize";break;case"west":x.$12l="ew-resize"}x.$10l=p}return!0}return!1},$42l:function(R,k,z,A,t){var E,H=this,$=H.gv,v=$.getEditPointSize(),n=v/$.getZoom(),O=-1,p={x:k.x,y:k.y,width:0,height:0},P=function(y){"shape"===t?H._shape=R:H._edge=R,H._removePointIndex=y},I=function(X){"shape"===t?H._shape=R:H._edge=R,H.$13l=X,H.$12l="crosshair"};for(r(p,n/2),O=z.length-1,E=A.size()-1;E>=0;E--){var K=A.get(E);if(1===K||2===K)O-=1;else if(3===K){var c=z[O-1];if(i(p,c))return I(O-1),!0;O-=2}else if(4===K){var q=z[O-1],g=z[O-2];if(i(p,q))return I(O-1),!0;if(i(p,g))return I(O-2),!0;O-=3}}for(O=z.length-1,E=A.size()-1;E>=0;E--){var K=A.get(E),u=z[O];if(i(p,u))return P(O),I(O),!0;1===K||2===K?O-=1:3===K?O-=2:4===K&&(O-=3)}return!1},$41l:function(m,n,$,x,Q){var E=this,q=E.gv,t=-1,M=0,k={x:n.x,y:n.y,width:0,height:0},K=function(H,f){E._hoverSegmentIndex=f,E._lp=n,"shape"===Q?E._shape=m:E._edge=m};for(r(k,q.getSegmentHoverWidth()/2/q.getZoom()),m instanceof T&&m.isClosePath()&&x.indexOf(5)<0&&(x=new p(x._as),x.add(5));M<x.size();M++){var B=x.get(M);if(1===B){var v=$[t],j=$[t+1];if(v){var N=gg(new $h(v.x,v.y),new $h(j.x,j.y),new $h(k.x,k.y),new $h(k.x+k.width,k.y+k.height));if(N.$62l===Y&&N.points.length>0)return K(N,M),!0}t+=1}else if(2===B){var v=$[t],j=$[t+1],N=gg(new $h(v.x,v.y),new $h(j.x,j.y),new $h(k.x,k.y),new $h(k.x+k.width,k.y+k.height));if(N.$62l===Y&&N.points.length>0)return K(N,M),!0;t+=1}else if(3===B){var v=$[t],y=$[t+1],_=$[t+2],N=Lq(new $h(v.x,v.y),new $h(y.x,y.y),new $h(_.x,_.y),new $h(k.x,k.y),new $h(k.x+k.width,k.y+k.height));if(N.$62l===Y)return K(N,M),!0;t+=2}else if(4===B){var v=$[t],c=$[t+1],H=$[t+2],_=$[t+3],N=Ip(new $h(v.x,v.y),new $h(c.x,c.y),new $h(H.x,H.y),new $h(_.x,_.y),new $h(k.x,k.y),new $h(k.x+k.width,k.y+k.height));if(N.$62l===Y)return K(N,M),!0;t+=3}else if(5===B){var v=$[t],j=$[0];if(v){var N=gg(new $h(v.x,v.y),new $h(j.x,j.y),new $h(k.x,k.y),new $h(k.x+k.width,k.y+k.height));if(N.$62l===Y&&N.points.length>0)return K(N,M),!0}}}return!1},addShapePoint:function(M,I,i){var J=this,v=J.gv,b=v.dm();if(b.beginTransaction(),0===arguments.length&&(M=J._shape||J._edge,I=J._hoverSegmentIndex,i=J._lp),M instanceof T||M instanceof D){var z=ql(M,v.getDataUI(M),I);if(!isNaN(I)&&i&&!isNaN(z)){var n=i;if(M instanceof T){var l=M.p(),Q=M.getRotation(),H=M.toSegments();H&&H.size()||(H=ng(M.getPoints())),M.isClosePath()&&H.indexOf(5)<0&&(H=new p(H._as),H.add(5));var E=H.get(I),f="addPoint",U="removePointAt";if(2===E||1===E){var S={x:n.x,y:n.y};H.add(E,I),S=jp(l,S.x-l.x,S.y-l.y,-Q),M[f](S,z+1)}else if(3===E){var F=M.getPoints(),G=F.get(z),r=F.get(z+2),S={x:n.x,y:n.y};S=jp(l,S.x-l.x,S.y-l.y,-Q);var u=xb(G,S),e=xb(S,r);H.removeAt(I),H.add(3,I),H.add(3,I),M.setPoint(z+1,S),M[f](e,z+2),M[f](u,z+1)}else if(4===E){var F=M.getPoints(),G=F.get(z),r=F.get(z+3),S={x:n.x,y:n.y};S=jp(l,S.x-l.x,S.y-l.y,-Q);var u=Rd(G,S),e=Xc(G,S),g=Rd(S,r),K=Xc(S,r);H.removeAt(I),H.add(4,I),H.add(4,I),M[U](z+1),M[U](z+1),M[f](S,z+1),M[f](K,z+2),M[f](g,z+2),M[f](e,z+1),M[f](u,z+1)}else if(5===E){var S={x:n.x,y:n.y};H.add(2,I),S=jp(l,S.x-l.x,S.y-l.y,-Q),M[f](S,z+1)}M.isClosePath()&&H.remove(5),M.setSegments(H);var s=M.getWidth(),A=M.getHeight(),k=M.p().x-s/2,R=M.p().y-A/2;k-=l.x,R-=l.y;var L=Dh(M,{x:k,y:R,width:s,height:A},Q,l);M.p(L.x,L.y)}else if(M instanceof D){if("points"!==M.s("edge.type"))return b.endTransaction(),void 0;var F=M.s("edge.points");H=M.s("edge.segments"),F=Xq(v.getDataUI(M),F),H&&H.size()||(H=ng(F)),H=new p(H._as.slice(0)),F=new p(F._as.slice(0));var E=H.get(I);if(2===E||1===E){var S={x:n.x,y:n.y};H.add(E,I),F.add(S,z+1)}else if(3===E){var G=F.get(z),r=F.get(z+2),S={x:n.x,y:n.y},u=xb(G,S),e=xb(S,r);H.removeAt(I),H.add(3,I),H.add(3,I),F.set(z+1,S),F.add(e,z+2),F.add(u,z+1)}else if(4===E){var G=F.get(z),r=F.get(z+3),S={x:n.x,y:n.y},u=Rd(G,S),e=Xc(G,S),g=Rd(S,r),K=Xc(S,r);H.removeAt(I),H.add(4,I),H.add(4,I),F.removeAt(z+1),F.removeAt(z+1),F.add(S,z+1),F.add(K,z+2),F.add(g,z+2),F.add(e,z+1),F.add(u,z+1)}M.s("edge.points",Sq(F)),M.s("edge.segments",H)}}}b.endTransaction()},removeShapePoint:function(h,K){var t=this,E="removeAt",_=t.gv,x=_.dm();if(x.beginTransaction(),0===arguments.length&&(h=t._shape||t._edge,K=t._removePointIndex),K>=0&&(h instanceof T||h instanceof D)){var A=Nk(h,t.gv.getDataUI(h),K),s=K;if(h instanceof T){var G=h.p(),L=h.toSegments();L&&L.size()||(L=ng(h.getPoints()));var r=L.get(A),O="removePointAt";if(1===r&&0===s)if(h.getPoints().size()>1){var d=L.get(A+1);L[E](A+1),3===d?h[O](s+1):4===d&&(h[O](s+2),h[O](s+1)),h[O](s)}else h.dm().remove(h);else 2===r||1===r?(L[E](A),h[O](s)):3===r?(L[E](A),h[O](s),h[O](s-1)):4===r&&(L[E](A),h[O](s),h[O](s-1),h[O](s-2));h.setSegments(L);var C=h.getWidth(),b=h.getHeight(),Z=h.p().x-C/2,q=h.p().y-b/2;Z-=G.x,q-=G.y;var w=Dh(h,{x:Z,y:q,width:C,height:b},h.getRotation(),G);h.p(w.x,w.y)}else if(h instanceof D){if("points"!==h.s("edge.type"))return x.endTransaction(),void 0;var g=h.s("edge.points");if(L=h.s("edge.segments"),g&&(g=Xq(t.gv.getDataUI(h),g),L&&L.size()||(L=ng(g))),0===K||K===g.size()-1)return x.endTransaction(),void 0;L=new p(L._as.slice(0)),g=new p(g._as.slice(0));var r=L.get(A);2===r||1===r?(L[E](A),g[E](s)):3===r?(L[E](A),g[E](s),g[E](s-1)):4===r&&(L[E](A),g[E](s),g[E](s-1),g[E](s-2)),h.s("edge.segments",L),h.s("edge.points",Sq(g))}}x.endTransaction()},changeShapeSegment:function(z,m,l){var M=this,o=M.gv,Z=o.dm();if(Z.beginTransaction(),1!==arguments.length||isNaN(z)||(l=z,z=M._shape||M._edge,m=M._hoverSegmentIndex),z instanceof T||z instanceof D){var X=ql(z,M.gv.getDataUI(z),m);if(!isNaN(m)&&!isNaN(X))if(z instanceof T){var g=z.p(),I=z.toSegments();I&&I.size()||(I=ng(z.getPoints()));var E=I.get(m),r=z.toPoints();if(1===l||2===l)1===E||2===E?I.set(m,l):3===E?(I.set(m,l),r.removeAt(X+1)):4===E&&(I.set(m,l),r.removeAt(X+1),r.removeAt(X+1));else if(3===l){var C=function(){var k=r.get(X),p=r.get(X+1),D=xb(k,p);I.set(m,3),r.add(D,X+1)};2===E||1===E?C():4===E&&(r.removeAt(X+1),r.removeAt(X+1),C())}else if(4===l){var a=function(){var O=r.get(X),Z=r.get(X+1),T=Rd(O,Z),n=Xc(O,Z);I.set(m,4),r.add(T,X+1),r.add(n,X+2)};2===E||1===E?a():3===E&&(r.removeAt(X+1),a())}z.setSegments(I),z.setPoints(r);var V=z.getWidth(),S=z.getHeight(),Q=z.p().x-V/2,h=z.p().y-S/2;Q-=g.x,h-=g.y;var P=new Dh(z,{x:Q,y:h,width:V,height:S},z.getRotation(),g);z.p(P.x,P.y)}else if(z instanceof D){if("points"!==z.s("edge.type"))return Z.endTransaction(),void 0;var r=z.s("edge.points");I=z.s("edge.segments"),r&&(r=Xq(M.gv.getDataUI(z),r),I&&I.size()||(I=ng(r))),I=new p(I._as.slice(0)),r=new p(r._as.slice(0));var E=I.get(m);if(1===l||2===l)1===E||2===E?I.set(m,l):3===E?(I.set(m,l),r.removeAt(X+1)):4===E&&(I.set(m,l),r.removeAt(X+1),r.removeAt(X+1));else if(3===l){var C=function(){var h=r.get(X),V=r.get(X+1),i=xb(h,V);I.set(m,3),r.add(i,X+1)};2===E||1===E?C():4===E&&(r.removeAt(X+1),r.removeAt(X+1),C())}else if(4===l){var a=function(){var f=r.get(X),E=r.get(X+1),g=Rd(f,E),C=Xc(f,E);I.set(m,4),r.add(g,X+1),r.add(C,X+2)};2===E||1===E?a():3===E&&(r.removeAt(X+1),a())}z.s("edge.points",Sq(r)),z.s("edge.segments",I)}}Z.endTransaction()},getDefaultSegments:function(n){var r=this.gv,L=r.getDataUI(n);if(n instanceof D){var p=n.s("edge.points");return p=Xq(L,p),ng(p)}if(n instanceof T){var p=n.getPoints(),u=n.getSegments();return u&&u.size()>0?u:ng(p)}},$43l:function(g){var m=this;g&&(m.$5l=1),m._68I=1,m._42()},_42:function(){var q=this;if(q._68I){delete q._68I;var N=q.gv,g=q.$5l,R=N.getZoom(),A=N.getEditPointSize(),H=A/2,W=new p,x=q._view,h=q._edge,X=q._shape,K=x.getContext("2d"),I=N.tx(),U=N.ty(),f=v,V=N.getEditPointBackground(),Q=N.getControlPointBackground(),i=N.getControlPointBorderColor(),F=N.getEditPointBorderColor(),C=N.getEditRectBorderColor(),J=N.getDirectionLineColor(),Z=N.getSegmentHoverColor(),Y=N.getSnapPointBorderColor(),e=N.getJoinPointBackground(),z=N.getJoinPointBorderColor(),n=N.getSegmentHoverWidth(),M=[5,5],O=N.getEditRectBorderStyle();Te(N,function(D){N.isSelected(D)&&N.isVisible(D)&&W.add(D)}),K.clearRect(0,0,c(x.width),c(x.height)),K.save(),d.translateAndScale(K,I,U,1);var u=v,k={x:0,y:0,width:0,height:0},E=0,l=0,_=0,o=0,m=0,P=0,Br=0,Xb=0,Lf=0,Jh=0,tn=[];if(g?(delete q.$6l,delete q.$8l,delete q.$7l,delete q.$16l,delete q.$23l):(u=q.$6l,f=q.$7l),delete q.$68l,delete q.$69l,delete q.$71l,delete q.$70l,delete q.$82l,delete q.$83l,delete q._pointElevationHelperPoint,delete q.$90l,delete q.$91l,delete q.$75l,delete q.$74l,W.each(function(R){var M=N.getDataUI(R);if(M){var n=M._55O;if(N.isEditable(R))n._56O&&R instanceof G&&l++,tn.push(R),n._42O&&R instanceof G&&E++,N.isHelperEditable(R,"host")&&o++,N.isHelperEditable(R,"parent")&&_++,N.isHelperEditable(R,"remove")&&m++,N.isHelperEditable(R,"edge")&&P++,N.isHelperEditable(R,"source")&&Br++,N.isHelperEditable(R,"target")&&Xb++,N.isHelperEditable(R,"elevation")&&Lf++,N.isHelperEditable(R,"tall")&&Jh++;else if(R instanceof b&&R.isExpanded()){var T=!0,V=N.getEditableFunc();V&&(T=V(R)),T&&(N.isHelperEditable(R,"host")&&o++,N.isHelperEditable(R,"parent")&&_++,N.isHelperEditable(R,"remove")&&m++,N.isHelperEditable(R,"edge")&&P++,N.isHelperEditable(R,"source")&&Br++,N.isHelperEditable(R,"target")&&Xb++,N.isHelperEditable(R,"elevation")&&Lf++,N.isHelperEditable(R,"tall")&&Jh++,tn.push(R))}}}),K.beginPath(),K.lineWidth=1,K.strokeStyle=N.getNodeBorderColor(),tn.forEach(function(h){var T=N.getDataUI(h),x=T._55O;if(g)if(f==v&&(f=h instanceof D?0:h instanceof b&&h.isExpanded()?0:h.getRotation(),q.$7l=f),u==v){var p,j,r;if(h instanceof b&&h.isExpanded()||h instanceof D){var J=N.getDataUIBounds(h);j=J.width,r=J.height,p={x:J.x+j/2,y:J.y+r/2}}else p=h.p(),j=h.getWidth(),r=h.getHeight();u={x:p.x,y:p.y,width:0,height:0},k.x=p.x-j/2,k.y=p.y-r/2,k.width=j,k.height=r,u=S(u,k)}else{var p,j,r,H,i=u.x+u.width/2,d=u.y+u.height/2,U={x:i,y:d};if(h instanceof b&&h.isExpanded()||h instanceof D){H=0;var J=N.getDataUIBounds(h);j=J.width,r=J.height,p={x:J.x+j/2,y:J.y+r/2}}else p=h.p(),j=h.getWidth(),r=h.getHeight(),H=h.getRotation();var M={x:p.x-j/2,y:p.y-r/2,width:j,height:r},w={x:M.x,y:M.y},$={x:M.x+M.width,y:M.y},X={x:M.x,y:M.y+M.height},l={x:M.x+M.width,y:M.y+M.height},w=jp(p,w.x-p.x,w.y-p.y,H),X=jp(p,X.x-p.x,X.y-p.y,H),l=jp(p,l.x-p.x,l.y-p.y,H),$=jp(p,$.x-p.x,$.y-p.y,H),Y=-f,I=jp(U,w.x-U.x,w.y-U.y,Y),n=jp(U,$.x-U.x,$.y-U.y,Y),a=jp(U,X.x-U.x,X.y-U.y,Y),t=jp(U,l.x-U.x,l.y-U.y,Y),P=y([I,n,a,t]);u=S(u,P),u.x-=i,u.y-=d;var A=Dh(v,u,f,U);u.x=A.x-u.width/2,u.y=A.y-u.height/2}if(E>1&&N.isEditable(h)&&N.isRectEditable(h)&&h instanceof G){var s=h.getRect(),F=x.$45l,B=Gr(F[0],R),m=Gr(F[2],R),V=Gr(F[4],R),L=Gr(F[6],R);h.getRotation()?(K.moveTo(B.x,B.y),K.lineTo(m.x,m.y),K.lineTo(V.x,V.y),K.lineTo(L.x,L.y),K.lineTo(B.x,B.y)):K.rect(s.x*R,s.y*R,s.width*R,s.height*R)}}),K.stroke(),u){q.$6l=B(u),r(u,N.getEditRectPadding()/R);var ij={x:u.x+u.width/2,y:u.y+u.height/2},Nr=ds(ij,u.width,u.height,f),Cl=Nr[0],Pf=Nr[1],Oi=Nr[2],yo=Nr[3],Zh=Nr[4],Lj=Nr[5],Zo=Nr[6],Nm=Nr[7];if(Cl=Gr(Nr[0],R),Pf=Gr(Nr[1],R),Oi=Gr(Nr[2],R),yo=Gr(Nr[3],R),Zh=Gr(Nr[4],R),Lj=Gr(Nr[5],R),Zo=Gr(Nr[6],R),Nm=Gr(Nr[7],R),q.$8l=u,E>0&&(q.$16l=[Cl,Zh,Pf,Lj,yo,Zo,Oi,Nm],K.beginPath(),K.lineWidth=1,K.strokeStyle=C,"dashed"===O&&K.setLineDash&&K.setLineDash(M),K.moveTo(Cl.x,Cl.y),K.lineTo(Pf.x,Pf.y),K.lineTo(yo.x,yo.y),K.lineTo(Oi.x,Oi.y),K.lineTo(Cl.x,Cl.y),K.stroke(),"dashed"===O&&K.setLineDash&&K.setLineDash([])),K.beginPath(),K.lineWidth=1,K.fillStyle=V,K.strokeStyle=F,E>0){var cj=Lj.x-Nm.x,ir=Lj.y-Nm.y,sp=s(cj*cj+ir*ir),rl=Zh.x-Zo.x,vc=Zh.y-Zo.y,hl=s(rl*rl+vc*vc),pe=2*A;if(N.isDirectionEditable&&1===tn.length){var Wf=tn[0],gn=N.getDataUI(Wf),tc=gn._55O,il=N.isDirectionEditable.bind(N);if(tc._42O){var xg,Ng,$o,Ub;il(Wf,"northwest")&&(xg=!0,K.rect(Cl.x-H,Cl.y-H,A,A)),il(Wf,"northeast")&&(Ng=!0,K.rect(Pf.x-H,Pf.y-H,A,A)),il(Wf,"southwest")&&($o=!0,K.rect(Oi.x-H,Oi.y-H,A,A)),il(Wf,"southeast")&&(Ub=!0,K.rect(yo.x-H,yo.y-H,A,A)),il(Wf,"north")&&(xg&&Ng?sp>pe&&K.rect(Zh.x-H,Zh.y-H,A,A):K.rect(Zh.x-H,Zh.y-H,A,A)),il(Wf,"south")&&(Ub&&$o?sp>pe&&K.rect(Zo.x-H,Zo.y-H,A,A):K.rect(Zo.x-H,Zo.y-H,A,A)),il(Wf,"west")&&($o&&xg?hl>pe&&K.rect(Nm.x-H,Nm.y-H,A,A):K.rect(Nm.x-H,Nm.y-H,A,A)),il(Wf,"east")&&(Ub&&Ng?hl>pe&&K.rect(Lj.x-H,Lj.y-H,A,A):K.rect(Lj.x-H,Lj.y-H,A,A))}}else sp>pe&&(K.rect(Zh.x-H,Zh.y-H,A,A),K.rect(Zo.x-H,Zo.y-H,A,A)),hl>pe&&(K.rect(Lj.x-H,Lj.y-H,A,A),K.rect(Nm.x-H,Nm.y-H,A,A)),K.rect(Cl.x-H,Cl.y-H,A,A),K.rect(Pf.x-H,Pf.y-H,A,A),K.rect(Oi.x-H,Oi.y-H,A,A),K.rect(yo.x-H,yo.y-H,A,A)}if(l>0){var yi=q.$23l=jp(Zh,0,2*-A,f);K.moveTo(yi.x+H,yi.y),K.arc(yi.x,yi.y,H,0,t,!1)}K.fill(),K.stroke(),q.$40l&&q.$44l(K,u,f);var ke,Xr,Dk=N.getLeftTopHelpers(),Lk=N.getRightTopHelpers(),df=N.getLeftBottomHelpers(),Xe=N.getRightBottomHelpers(),Mq=N.getEdgeHelpers(),De=N.getEditHelperSize(),Pb=De/2,so=function(G,a,c,h){"leftTop"===a?(ke=u.x*R-De-H-("h"===h?c*(De+H):0)-1,Xr=u.y*R-De-H-("v"===h?c*(De+H):0)-1):"rightTop"===a?(ke=(u.x+u.width)*R+H+("h"===h?c*(De+H):0)+1,Xr=u.y*R-De-H-("v"===h?c*(De+H):0)-1):"leftBottom"===a?(ke=u.x*R-De-H-("h"===h?c*(De+H):0)-1,Xr=(u.y+u.height)*R+H+("v"===h?c*(De+H):0)+1):"rightBottom"===a&&(ke=(u.x+u.width)*R+H+("h"===h?c*(De+H):0)+1,Xr=(u.y+u.height)*R+H+("v"===h?c*(De+H):0)+1);var x=ke+Pb,Y=Xr+Pb,t=(u.x+u.width/2)*R,J=(u.y+u.height/2)*R,s=jp({x:t,y:J},x-t,Y-J,f);if("host"===G){if(o>0)return q.$77l(K,f,s),!0}else if("edge"===G){if(P>0)return q.$80l(K,f,s),!0}else if("remove"===G){if(m>0)return tn&&1===tn.length&&tn[0]instanceof D?q.$81l(K,f,{x:t+De/2+5,y:J}):q.$81l(K,f,s),!0}else if("parent"===G){if(_>0)return tn&&1===tn.length&&tn[0]instanceof D?q.$76l(K,f,{x:t-De/2-5,y:J}):q.$76l(K,f,s),!0}else if("elevation"===G){if(Lf>0)return q.$85l(K,f,s),!0}else if("tall"===G){if(Jh>0)return q.$86l(K,f,s),!0}else if("source"===G||"target"===G){var C=tn[0],L=N.getDataUI(C),y=Vj(L,!0),z=y[0],e=y[1];if(Br&&"source"===G)return q.$84l(K,u,z,!0,C.isLooped(),a,c,h),!0;if(Xb&&"target"===G)return q.$84l(K,u,e,!1,C.isLooped(),a,c,h),!0}};if(Dk&&Dk.length>0){var Nf=0;Dk.forEach(function(e){so(e,"leftTop",Nf,N.getLeftTopHelpersAlign()||"h")&&Nf++})}if(Lk&&Lk.length>0){var Nf=0;Lk.forEach(function(i){so(i,"rightTop",Nf,N.getRightTopHelpersAlign()||"h")&&Nf++})}if(df&&df.length>0){var Nf=0;df.forEach(function(K){so(K,"leftBottom",Nf,N.getLeftBottomHelpersAlign()||"h")&&Nf++})}if(Xe&&Xe.length>0){var Nf=0;Xe.forEach(function(X){so(X,"rightBottom",Nf,N.getRightBottomHelpersAlign()||"h")&&Nf++})}if(Mq&&Mq.length>0&&((Br||Xb)&&tn&&1===tn.length&&tn[0]instanceof D?!0:!1)){var Nf=0;Mq.forEach(function(i){so(i,"edge",Nf,"h")&&Nf++})}if(q.$72l){var Xd,le=q.$67l,xp=q.$68l,Cd=q.$69l,xm=(q.$71l,q.$70l),Eh=q.$82l,Wm=q.$83l;if(1===le?Xd=xp:2===le?Xd=Cd:3===le?Xd=xm:5===le?Xd=Eh:6===le&&(Xd=Wm),Xd){var $m=N.lp(q.$72l),Ao=N.getDataAt(q.$72l);if(Ao&&Ao instanceof G){var ed,Wo,Rm;if(q.$73l=Ao,1===le)if(Ao instanceof $.Grid)ed=q.$75l=Eo(Ao,$m);else if(Ao instanceof $.Shape){Rm=q.$74l=Ah(Ao,$m);var pb=Ao.getPoints();if(Rm){var Ar=Rm.attachIndex,Kq=ql(Ao,N.getDataUI(Ao),Ar)+1,Db=Kq+1>=pb.size()?0:Kq+1,zr=pb.get(Kq),Oc=pb.get(Db),Kb=Ao.p(),li=Ao.getRotation();zr=jp(Kb,zr.x-Kb.x,zr.y-Kb.y,li),Oc=jp(Kb,Oc.x-Kb.x,Oc.y-Kb.y,li),K.beginPath(),K.strokeStyle=Z,K.lineWidth=n,K.moveTo(zr.x*R,zr.y*R),K.lineTo(Oc.x*R,Oc.y*R),K.stroke()}}ed?Wo=ed.rect:(Wo=w.clone(N.getDataUIBounds(Ao)),w.grow(Wo,2)),K.beginPath(),K.rect(Wo.x*R,Wo.y*R,Wo.width*R,Wo.height*R),K.strokeStyle=1===le||4===le||6===le?j:L,K.lineWidth=2,K.setLineDash&&K.setLineDash([8,8]),K.stroke()}else delete q.$73l;$m.x=$m.x*R,$m.y=$m.y*R;var Ik=In(Xd.x,Xd.y,$m.x,$m.y),om=jp(Xd,$m.x-Xd.x,$m.y-Xd.y,-Ik),Fd=om.x-Xd.x;K.save(),K.translate(Xd.x,Xd.y),K.rotate(Ik),a.width=Fd,a.height=40;var ki=L;(1===le||4===le||6===le)&&(ki=j),a.comps[0].gradientColor=ki,w.drawImage(K,a,0,-20,Fd,40),K.restore()}}}if(W.each(function(d){var f=N.getDataUI(d);if(f){var G,g,j=f._55O,m=f._78o;if(j&&j._43O&&d instanceof T?(G=j.$15l,g=d.getSegments(),g&&g.size()||(g=ng(G)),d.isClosePath()&&g.indexOf(5)<0&&(g=new p(g._as),g.add(5))):j&&m&&j._43O&&(G=d.s("edge.points"),g=d.s("edge.segments"),G=Xq(f,G),g&&g.size()||(g=ng(G)),G&&(G=G._as)),G&&g){var P=0,V=g.size(),L=q._hoverSegmentIndex;G=G.slice(0);for(var E=0;E<G.length;E++)G[E]=Gr(G[E],R);K.beginPath(),K.strokeStyle=J,K.lineWidth=1,P=0;for(var E=0;V>E;E++){var b=g.get(E);if(1===b||2===b)P++;else if(3===b){var w=G[P-1],y=G[P],l=G[P+1];K.moveTo(w.x,w.y),K.lineTo(y.x,y.y),K.lineTo(l.x,l.y),P+=2}else if(4===b){var w=G[P-1],D=G[P],O=G[P+1],l=G[P+2];K.moveTo(w.x,w.y),K.lineTo(D.x,D.y),K.moveTo(O.x,O.y),K.lineTo(l.x,l.y),P+=3}}if(K.stroke(),X===d||h===d&&"points"===h.s("edge.type")){K.beginPath(),P=0,K.strokeStyle=Z,K.lineWidth=n;for(var E=0;V>E;E++){var b=g.get(E);if(1===b||2===b){if(L===E){var w=G[P-1],l=G[P];K.moveTo(w.x,w.y),K.lineTo(l.x,l.y);break}P++}else if(3===b){if(L===E){var w=G[P-1],y=G[P],l=G[P+1];K.moveTo(w.x,w.y),K.quadraticCurveTo(y.x,y.y,l.x,l.y);break}P+=2}else if(4===b){if(L===E){var w=G[P-1],D=G[P],O=G[P+1],l=G[P+2];K.moveTo(w.x,w.y),K.bezierCurveTo(D.x,D.y,O.x,O.y,l.x,l.y);break}P+=3}else if(5===b&&L===E){var w=G[P-1],l=G[0];K.moveTo(w.x,w.y),K.lineTo(l.x,l.y);break}}K.stroke()}K.beginPath(),P=0,K.strokeStyle=z,K.lineWidth=1,K.fillStyle=e;for(var E=0;V>E;E++){var b=g.get(E);if(1===b||2===b){var l=G[P];K.moveTo(l.x+H,l.y),K.arc(l.x,l.y,H,0,t,!0),P++}else if(3===b){var l=G[P+1];K.moveTo(l.x+H,l.y),K.arc(l.x,l.y,H,0,t,!0),P+=2}else if(4===b){var l=G[P+2];K.moveTo(l.x+H,l.y),K.arc(l.x,l.y,H,0,t,!0),P+=3}}K.fill(),K.stroke(),K.beginPath(),P=0,K.strokeStyle=i,K.lineWidth=1,K.fillStyle=Q;for(var E=0;V>E;E++){var b=g.get(E);if(1===b||2===b)P++;else if(3===b){var y=G[P];K.moveTo(y.x+H,y.y),K.arc(y.x,y.y,H,0,t,!0),P+=2}else if(4===b){var D=G[P],O=G[P+1];K.moveTo(D.x+H,D.y),K.arc(D.x,D.y,H,0,t,!0),K.moveTo(O.x+H,O.y),K.arc(O.x,O.y,H,0,t,!0),P+=3}}if(K.fill(),K.stroke(),K.beginPath(),P=0,K.strokeStyle=Y,K.lineWidth=2,(X===d||h===d)&&q.$9l!=v){var l=G[q.$9l];K.moveTo(l.x+H,l.y),K.arc(l.x,l.y,H,0,t,!0),K.stroke()}}}}),q.$87l&&N.sm().contains(q.$87l)){var lp,zi=q.$87l,bf=q.$88l,De=N.getEditHelperSize(),Pb=De/2;if(N.isHelperEditable(zi,"pointElevation"))if(zi instanceof T){var Nl=zi.getPosition();lp=w.clone(zi.getPoints().get(bf)),lp=jp({x:Nl.x,y:Nl.y},lp.x-Nl.x,lp.y-Nl.y,zi.getRotation()),lp.x*=R,lp.y*=R,K.translate(lp.x,lp.y),w.drawImage(K,w.getImage("xeditinteractor_elevationIcon"),Pb,-Pb,De,De),K.translate(-lp.x,-lp.y),q._pointElevationHelperPoint={x:lp.x+De,y:lp.y}}else if(zi instanceof D){var fh=Xq(N.getDataUI(zi),zi.s("edge.points")),lp=w.clone(fh.get(bf));lp.x*=R,lp.y*=R,K.translate(lp.x,lp.y),w.drawImage(K,w.getImage("xeditinteractor_elevationIcon"),Pb,-Pb,De,De),K.translate(-lp.x,-lp.y),q._pointElevationHelperPoint={x:lp.x+De,y:lp.y}}}K.restore(),q.$5l=0}},$89l:function(H,s,T,h){H.save();var l=this,i=l.gv,D=i.getEditHelperSize(),E=D/2;H.beginPath(),H.translate(T.x,T.y),H.rotate(s),w.drawImage(H,h,-E,-E,D,D),H.restore()},$85l:function(O,X,M){var C=this;C.$90l=M,C.$89l(O,X,M,w.getImage("xeditinteractor_elevationIcon"))},$86l:function(z,L,V){var A=this;A.$91l=V,A.$89l(z,L,V,w.getImage("xeditinteractor_tallIcon"))},$77l:function(A,k,B){var x=this;x.$68l=B,x.$89l(A,k,B,w.getImage("xeditinteractor_hostIcon"))},$80l:function(d,r,y){var G=this;G.$70l=y,G.$89l(d,r,y,w.getImage("xeditinteractor_edgeIcon"))},$81l:function(m,P,h){var $=this;$.$71l=h,$.$89l(m,P,h,w.getImage("xeditinteractor_removeIcon"))},$76l:function(S,k,A){var P=this;P.$69l=A,P.$89l(S,k,A,w.getImage("xeditinteractor_parentIcon"))},$84l:function(m,p,U,R,C){var k,Q=this,Y=Q.gv,H=Y.getZoom(),q=Y.getEditHelperSize(),f=q/2;U.x*=H,U.y*=H,C&&(R?U.x-=f+5:U.x+=f+5),U.y-=q-2,R?(Q.$82l=U,k=w.getImage("xeditinteractor_sourceIcon")):(Q.$83l=U,k=w.getImage("xeditinteractor_targetIcon")),m.beginPath(),m.translate(U.x,U.y),w.drawImage(m,k,-f,-f,q,q),m.translate(-U.x,-U.y)},$44l:function(K,y,t){K.save();var d=this.gv.getZoom(),U=s(f(y.width,2)+f(y.height,2))/2*d+10,Y=U,r=Y+8,F=Y+18,W=t,Q=y.x+y.width/2,k=y.y+y.height/2;K.translate(Q*d,k*d),K.beginPath(),K.strokeStyle="rgb(150, 150, 150)";for(var T=0,j=0,b=0,J=0,v=0,P=0;360>P;P++)T=P*M/180,0===P%5&&(j=q(T)*Y,b=N(T)*Y,J=q(T)*r,v=N(T)*r,K.moveTo(j,b),K.lineTo(J,v)),0===P%45&&(j=q(T)*Y,b=N(T)*Y,J=q(T)*F,v=N(T)*F,K.moveTo(j,b),K.lineTo(J,v));K.stroke(),K.beginPath(),K.rotate(-l),K.beginPath(),K.fillStyle="rgba(255, 0, 0, 0.1)",K.strokeStyle="rgb(157, 157, 157)",K.moveTo(0,0),K.arc(0,0,F,0,t,!1),K.fill(),K.beginPath(),K.moveTo(0+F,0),K.arc(0,0,F,0,t,!1),K.stroke(),K.rotate(l),K.font="bold 12px Verdana, Arial";var E=20*N(W),h=20*q(W),o=_(180*W/M)+"°";K.textAlign="center",K.textBaseline="middle",K.beginPath();var I=K.measureText("365.°").width;K.fillStyle="white",K.rect(E-I/2,-h-10,I,20),K.fill(),K.beginPath(),K.fillStyle="rgb(79,79,79)",K.fillText(o,E,-h),K.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);