!function(D){"use strict";var e="ht",P=D[e],d=P.Default,s=Math,E=(s.PI,s.sin,s.cos,s.atan2,s.sqrt,s.max),b=s.floor,v=(s.round,s.ceil),k=P.Shape,G=(P.Edge,P.List),R=P.Style,Q=P.graph,x=d.getInternal(),$=x.ui(),O=null,I="prototype",l=D.clearInterval,N=D.setInterval,h=function(O){var W=O.data,Q=this.dm();if(W&&"add"===O.kind){var m=Q.$1c,s=W instanceof k?"shape.":"edge.";m&&W.s(s+"dash.flow")&&m.indexOf(W)<0&&m.push(W)}"clear"===O.kind&&(Q.$1c=[])},q=function(Y){var i=Y.property,W=Y.data,B=Y.newValue,G=this.dm().$1c,U=W instanceof k?"s:shape.dash.flow":"s:edge.dash.flow";if(G&&i===U)if(B)G.indexOf(W)<0&&G.push(W);else for(var S=G.length,w=0;S>w;w++)if(G[w]===W){G.splice(w,1);break}},K=Q.GraphView[I],L=$.EdgeUI[I],S=$.ShapeUI[I],C=S._80o,p=L._80o,U=P.DataModel[I],m=U.prepareRemove,y=K.setDataModel;R["edge.dash.flow.step"]==O&&(R["edge.dash.flow.step"]=3),R["shape.dash.flow.step"]==O&&(R["shape.dash.flow.step"]=3),U.prepareRemove=function(p){m.call(this,p);var H=p._dataModel,D=H.$1c;if(D)for(var Z=D.length,f=0;Z>f;f++)if(D[f]===p){D.splice(f,1);break}},K.setDataModel=function(l){var x=this,E=x._dataModel;if(E!==l){E&&(E.umm(h,x),E.umd(q,x),E.$1c=[]),l.mm(h,x),l.md(q,x);var J=l.$1c=[];l.each(function(Q){var i=Q instanceof k?"shape.":"edge.";Q.s(i+"dash.flow")&&J.indexOf(Q)<0&&J.push(Q)}),y.call(x,l)}},K.setDashFlowInterval=function(h){var U=this,Z=U.$2c;U.$2c=h,U.fp("dashFlowInterval",Z,h),U.$3c!=O&&(l(U.$3c),delete U.$3c,U.enableDashFlow(h))},K.getDashFlowInterval=function(){return this.$2c},K.$4c=function(){var C,n,$,q=this,m=q.tx(),l=q.ty(),O=q._zoom,Q=q.getWidth(),t=q.getHeight(),X={x:-m/O,y:-l/O,width:Q/O,height:t/O},N=q.dm().$1c,R=q._56I,k=new G;if(N.forEach(function(X){R[X.getId()]&&(C=q.getDataUI(X),C&&($=C._79o(),$&&k.add($)))}),0!==k.size()&&(k.each(function(C){d.intersectsRect(X,C)&&(n=d.unionRect(n,C))}),n&&(n&&(d.grow(n,E(1,1/O)),n.x=b(n.x*O)/O,n.y=b(n.y*O)/O,n.width=v(n.width*O)/O,n.height=v(n.height*O)/O,n=d.intersection(X,n)),n))){var z=q._canvas.getContext("2d");z.save(),z.lineCap=d.lineCap,z.lineJoin=d.lineJoin,x.translateAndScale(z,m,l,O),z.beginPath(),z.rect(n.x,n.y,n.width,n.height),z.clip(),z.clearRect(n.x,n.y,n.width,n.height),q.$5c(z,n),z.restore()}},K.$5c=function(t,s){var $,e,U=this;U._93db(t),U.each(function(X){U._56I[X._id]&&($=U.getDataUI(X),$&&(e=$._79o(),(!s||d.intersectsRect(s,e))&&($.$7c=!0,$._42(t),delete $.$7c)))}),U._92db(t)},K.enableDashFlow=function(W){var s=this;s.$3c==O&&(s.$3c=N(function(){s.$4c()},W||s.$2c||50))},K.disableDashFlow=function(){var M=this;l(M.$3c),delete M.$3c};var n=function(){var I=this,N=I._data,l=N instanceof k?"shape.":"edge.",s=N.s(l+"dash.pattern"),j=N.s(l+"dash.flow.reverse");if(s&&N.s(l+"dash")&&N.s(l+"dash.flow")&&I.$7c){var e=I.s(l+"dash.offset")||0,V=N.s(l+"dash.flow.step"),R=N.getStyleMap(),q=0;s.forEach(function(Q){q+=Q}),j&&(V=-V),e-=V,e%=q,R||(N._styleMap=R={}),R[l+"dash.offset"]=e}};L._80o=function(c){p.call(this,c),n.call(this)},S._80o=function(q){C.call(this,q),n.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);